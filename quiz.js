// ==========================================
// QUIZ ENGINE & QUESTION BANK
// ==========================================

// 1. 150+ рдкреНрд░рд╢реНрдиреЛрдВ рдХрд╛ рдорд╣рд╛-рд╕рдВрдЧреНрд░рд╣ (Array of Questions)
const SUPREME_QUIZ_BANK = [
    { q: "рднрдЧрд╡рд╛рди рд╢реНрд░реА рдХреГрд╖реНрдг рдХрд╛ рдЬрдиреНрдо рдХрд╣рд╛рдБ рд╣реБрдЖ рдерд╛?", o: ["рд╡реГрдВрджрд╛рд╡рди", "рдордереБрд░рд╛", "рджреНрд╡рд╛рд░рдХрд╛", "рдЧреЛрдХреБрд▓"], a: 1 },
    { q: "рд╢реНрд░реА рдХреГрд╖реНрдг рдХреЗ рдкрд┐рддрд╛ рд╡рд╕реБрджреЗрд╡ рдХрд┐рд╕ рд╡рдВрд╢ рд╕реЗ рдереЗ?", o: ["рд╕реВрд░реНрдпрд╡рдВрд╢", "рдпрджреБрд╡рдВрд╢", "рдХреБрд░реБрд╡рдВрд╢", "рд░рдШреБрд╡рдВрд╢"], a: 1 },
    { q: "рд╢реНрд░реА рдХреГрд╖реНрдг рдХреА рдорд╛рддрд╛ рджреЗрд╡рдХреА рдХреЗ рднрд╛рдИ рдХрд╛ рдирд╛рдо рдХреНрдпрд╛ рдерд╛?", o: ["рдирдВрдж", "рдЕрдХреНрд░реВрд░", "рдХрдВрд╕", "рдЬрд░рд╛рд╕рдВрдз"], a: 2 },
    { q: "рд╢реНрд░реА рдХреГрд╖реНрдг рдХрд╛ рдкрд╛рд▓рди-рдкреЛрд╖рдг рдХрд┐рд╕ рд╕реНрдерд╛рди рдкрд░ рд╣реБрдЖ?", o: ["рдордереБрд░рд╛", "рджреНрд╡рд╛рд░рдХрд╛", "рдЧреЛрдХреБрд▓", "рд╣рд╕реНрддрд┐рдирд╛рдкреБрд░"], a: 2 },
    { q: "рд╢реНрд░реА рдХреГрд╖реНрдг рдХреЗ рдкреНрд░рд┐рдп рдорд┐рддреНрд░ рд╕реБрджрд╛рдорд╛ рдХрд┐рд╕ рдЧрд╛рдБрд╡ рдХреЗ рдереЗ?", o: ["рдордереБрд░рд╛", "рдкреЛрд░рдмрдВрджрд░", "рджреНрд╡рд╛рд░рдХрд╛", "рдЙрдЬреНрдЬреИрди"], a: 1 },
    { q: "рднрдЧрд╡рдж рдЧреАрддрд╛ рдХрд╛ рдЙрдкрджреЗрд╢ рдорд╣рд╛рднрд╛рд░рдд рдХреЗ рдХрд┐рд╕ рдкрд░реНрд╡ рдореЗрдВ рдЖрддрд╛ рд╣реИ?", o: ["рдЖрджрд┐ рдкрд░реНрд╡", "рднреАрд╖реНрдо рдкрд░реНрд╡", "рд╢рд╛рдВрддрд┐ рдкрд░реНрд╡", "рд╡рди рдкрд░реНрд╡"], a: 1 },
    { q: "рд╢реНрд░реА рдХреГрд╖реНрдг рдХреЗ рдЧреБрд░реБ рд╕рдВрджреАрдкрдирд┐ рдореБрдирд┐ рдХрд╛ рдЖрд╢реНрд░рдо рдХрд╣рд╛рдБ рд╣реИ?", o: ["рдордереБрд░рд╛", "рд╡реГрдВрджрд╛рд╡рди", "рдЙрдЬреНрдЬреИрди", "рдХрд╛рд╢реА"], a: 2 },
    { q: "рд╢реНрд░реА рдХреГрд╖реНрдг рдиреЗ рдЧреЛрд╡рд░реНрдзрди рдкрд░реНрд╡рдд рдХреЛ рдЕрдкрдиреА рдХрд┐рд╕ рдЙрдБрдЧрд▓реА рдкрд░ рдЙрдард╛рдпрд╛ рдерд╛?", o: ["рдЕрдВрдЧреВрдард╛", "рддрд░реНрдЬрдиреА", "рдХрдирд┐рд╖реНрдард╛", "рдордзреНрдпрдорд╛"], a: 2 },
    { q: "рд╢реНрд░реА рдХреГрд╖реНрдг рдХреА рдкрд╣рд▓реА рдкрддреНрдиреА рдХреМрди рдереАрдВ?", o: ["рд╕рддреНрдпрднрд╛рдорд╛", "рд░реБрдХреНрдорд┐рдгреА", "рдЬрд╛рдореНрдмрд╡рддреА", "рд░рд╛рдзрд╛"], a: 1 },
    { q: "рд╢реНрд░реА рдХреГрд╖реНрдг рдХреЗ рд░рде рдХрд╛ рдирд╛рдо рдХреНрдпрд╛ рдерд╛?", o: ["рдЬреИрддреНрд░", "рдЧрд░реБреЬрдзреНрд╡рдЬ", "рдирдВрджрд┐рдШреЛрд╖", "рд╡рд┐рдЬрдп"], a: 0 },
    { q: "рдЕрд░реНрдЬреБрди рдХреЗ рдзрдиреБрд╖ рдХрд╛ рдирд╛рдо рдХреНрдпрд╛ рдерд╛?", o: ["рд╡рд┐рдЬрдп", "рдЧрд╛рдВрдбреАрд╡", "рдкрд┐рдирд╛рдХ", "рд╢рд╛рд░рдВрдЧ"], a: 1 },
    { q: "рд╢реНрд░реА рдХреГрд╖реНрдг рдХреЗ рд╕реБрджрд░реНрд╢рди рдЪрдХреНрд░ рдореЗрдВ рдХрд┐рддрдиреА рддреАрд▓рд┐рдпрд╛рдБ рдереАрдВ?", o: ["12", "108", "1000", "24"], a: 1 },
    { q: "рдХрд╛рд▓рд┐рдп рдирд╛рдЧ рдХрд┐рд╕ рдирджреА рдореЗрдВ рд░рд╣рддрд╛ рдерд╛?", o: ["рдЧрдВрдЧрд╛", "рдпрдореБрдирд╛", "рд╕рд░рд╕реНрд╡рддреА", "рдирд░реНрдорджрд╛"], a: 1 },
    { q: "рд░реБрдХреНрдорд┐рдгреА рдХрд┐рд╕ рд░рд╛рдЬреНрдп рдХреА рд░рд╛рдЬрдХреБрдорд╛рд░реА рдереАрдВ?", o: ["рд╡рд┐рджрд░реНрдн", "рдордЧрдз", "рдкрд╛рдВрдЪрд╛рд▓", "рдХреМрд╢рд▓"], a: 0 },
    { q: "рдорд╣рд╛рднрд╛рд░рдд рдпреБрджреНрдз рдореЗрдВ рд╢реНрд░реА рдХреГрд╖реНрдг рдХрд┐рд╕рдХреЗ рд╕рд╛рд░рдереА рдмрдиреЗ?", o: ["рднреАрдо", "рдЕрд░реНрдЬреБрди", "рдпреБрдзрд┐рд╖реНрдард┐рд░", "рдХрд░реНрдг"], a: 1 },
    { q: "рд╢реНрд░реА рдХреГрд╖реНрдг рдХреА рдЖрда рдкрдЯрд░рд╛рдирд┐рдпреЛрдВ рдореЗрдВ рд╕реЗ рдЬрд╛рдорд╡рдВрддреА рдХрд┐рд╕рдХреА рдкреБрддреНрд░реА рдереАрдВ?", o: ["рднреАрд╖реНрдордХ", "рдЬрд╛рдорд╡рдВрдд", "рд╕рддреНрд░рд╛рдЬрд┐рдд", "рдЬрдирдХ"], a: 1 },
    { q: "рдХрдВрд╕ рдХрд╛ рд╡рдз рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж рдХреГрд╖реНрдг рдиреЗ рдХрд┐рд╕реЗ рдордереБрд░рд╛ рдХрд╛ рд░рд╛рдЬрд╛ рдмрдирд╛рдпрд╛?", o: ["рд╡рд╕реБрджреЗрд╡", "рдЙрдЧреНрд░рд╕реЗрди", "рдЕрдХреНрд░реВрд░", "рд╕реНрд╡рдпрдВ рдмрдиреЗ"], a: 1 },
    { q: "рд╢реНрд░реА рдХреГрд╖реНрдг рдХреЗ рдзрдиреБрд╖ рдХрд╛ рдирд╛рдо рдХреНрдпрд╛ рдерд╛?", o: ["рдЧрд╛рдВрдбреАрд╡", "рд╢рд╛рд░рдВрдЧ", "рдкрд┐рдирд╛рдХ", "рд╡рд┐рдЬрдп"], a: 1 },
    { q: "рдкрд╛рдВрдбрд╡реЛрдВ рдХреА рдорд╛рддрд╛ рдХреБрдВрддреА, рдХреГрд╖реНрдг рдХреА рд░рд┐рд╢реНрддреЗ рдореЗрдВ рдХреНрдпрд╛ рд▓рдЧрддреА рдереАрдВ?", o: ["рдореМрд╕реА", "рдмреБрдЖ", "рдЪрд╛рдЪреА", "рдирд╛рдиреА"], a: 1 },
    { q: "рд╢рд┐рд╢реБрдкрд╛рд▓ рдХрд╛ рд╡рдз рдХреГрд╖реНрдг рдиреЗ рдХрд┐рд╕ рд╕рднрд╛ рдореЗрдВ рдХрд┐рдпрд╛ рдерд╛?", o: ["рд░рд╛рдЬрд╕реВрдп рдпрдЬреНрдЮ", "рдЕрд╢реНрд╡рдореЗрдз рдпрдЬреНрдЮ", "рджреНрдпреВрдд рд╕рднрд╛", "рд╕реНрд╡рдпрдВрд╡рд░"], a: 0 }
    // (рднрд╛рдИ, рдЗрд╕реА рдкреИрдЯрд░реНрди рдореЗрдВ рдЖрдк рдпрд╣рд╛рдБ 150+ рд╕рд╡рд╛рд▓ рдЬреЛреЬрддреЗ рдЬрд╛ рд╕рдХрддреЗ рд╣реИрдВред 
    // рдЬрд┐рддрдирд╛ рдЬреНрдпрд╛рджрд╛ рд╕рд╡рд╛рд▓, рдЙрддрдиреА рд▓рдВрдмреА рдХреЛрдбрд┐рдВрдЧ рдлрд╛рдЗрд▓ред)
];

// 2. рдХреНрд╡рд┐рдЬрд╝ рд╕реНрдЯреЗрдЯ рдореИрдиреЗрдЬрдореЗрдВрдЯ
let quizQuestions = [];
let currentQuestionIndex = 0;
let userScore = 0;

// 3. рдХреНрд╡рд┐рдЬрд╝ рд╢реБрд░реВ рдХрд░рдиреЗ рдХрд╛ рдореБрдЦреНрдп рдлрдВрдХреНрд╢рди
window.startQuiz = () => {
    // 150 рдореЗрдВ рд╕реЗ рд░реИрдВрдбрдо 10 рд╕рд╡рд╛рд▓ рдЪреБрдирдирд╛ (Shuffle Algorithm)
    quizQuestions = [...SUPREME_QUIZ_BANK]
        .sort(() => Math.random() - 0.5)
        .slice(0, 10);
    
    currentQuestionIndex = 0;
    userScore = 0;
    
    // UI рдХреЛ рд╕рд╛рдлрд╝ рдХрд░рдХреЗ рдкрд╣рд▓рд╛ рд╕рд╡рд╛рд▓ рджрд┐рдЦрд╛рдПрдВ
    renderQuizQuestion();
};

// 4. рд╕рд╡рд╛рд▓ рдХреЛ рд░реЗрдВрдбрд░ (рджрд┐рдЦрд╛рдирд╛) рдХрд░рдирд╛
function renderQuizQuestion() {
    const q = quizQuestions[currentQuestionIndex];
    const overlayContent = document.getElementById('overlay-content');
    
    let html = `
        <h2 style="color:#B22222; text-align:center;">ЁЯЪй рдЖрдзреНрдпрд╛рддреНрдорд┐рдХ рдХреНрд╡рд┐рдЬрд╝</h2>
        <div style="background:#f9f9f9; padding:15px; border-radius:10px; margin-bottom:15px; text-align:right; font-size:12px; color:#666;">
            рдкреНрд░рд╢реНрди: ${currentQuestionIndex + 1} / 10 | рд╕реНрдХреЛрд░: ${userScore}
        </div>
        <div class="wisdom-card" style="font-size:18px; font-weight:bold; margin-bottom:20px; line-height:1.4;">
            ${q.q}
        </div>
        <div class="menu-grid" style="grid-template-columns: 1fr; gap:12px;">
            ${q.o.map((option, index) => `
                <div class="pujan-card quiz-option" 
                     style="background:white; border:1px solid #ddd; margin-bottom:0;" 
                     onclick="window.handleQuizAnswer(${index})">
                    <b>${String.fromCharCode(65 + index)}.</b> ${option}
                </div>
            `).join('')}
        </div>
    `;
    
    overlayContent.innerHTML = html + `<button class="back-link" style="width:100%; margin-top:20px;" onclick="window.hideSection()">рдХреНрд╡рд┐рдЬрд╝ рд╕рдорд╛рдкреНрдд рдХрд░реЗрдВ

