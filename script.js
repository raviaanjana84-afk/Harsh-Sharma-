let deferredPrompt;

// рд╕рд░реНрд╡рд┐рд╕ рд╡рд░реНрдХрд░ рд░рдЬрд┐рд╕реНрдЯрд░ рдХрд░рдирд╛
if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
        navigator.serviceWorker.register('service-worker.js')
            .then(reg => console.log('Service Worker Live!'))
            .catch(err => console.error('SW Registration Failed!', err));
    });
}

// рдЗрдВрд╕реНрдЯреЙрд▓ рдмрдЯрди рдХреЛ рджрд┐рдЦрд╛рдирд╛
window.addEventListener('beforeinstallprompt', (e) => {
    e.preventDefault();
    deferredPrompt = e;
    const installArea = document.getElementById('install-area');
    if(installArea) installArea.style.display = 'block';
});

window.installApp = async () => {
    if (deferredPrompt) {
        deferredPrompt.prompt();
        const { outcome } = await deferredPrompt.userChoice;
        if (outcome === 'accepted') {
            document.getElementById('install-area').style.display = 'none';
        }
        deferredPrompt = null;
    }
};
// Firebase рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди
const firebaseConfig = {
    apiKey: "AIzaSyDO8kxU1t9zcfD0MXf6vhLlE3FR_CUKycE",
    authDomain: "harsh-sharma-website-f01ac.firebaseapp.com",
    projectId: "harsh-sharma-website-f01ac",
    storageBucket: "harsh-sharma-website-f01ac.firebasestorage.app",
    messagingSenderId: "8698683996",
    appId: "1:8698683996:web:58cd2b05fcf71646e0bc99"
};

if (!firebase.apps.length) firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

// рд░рд┐рд╡реНрдпреВ рд╕реЗрд╡ рдХрд░рдирд╛
window.saveReview = async () => {
    const name = document.getElementById('userName').value;
    const review = document.getElementById('userReview').value;
    if (name && review) {
        await db.collection("reviews").add({ name, review, time: new Date() });
        alert("ЁЯЩП рдЖрдкрдХрд╛ рдЕрдиреБрднрд╡ рд╕реБрд░рдХреНрд╖рд┐рдд рд╣реЛ рдЧрдпрд╛ рд╣реИ!");
        document.getElementById('userName').value = "";
        document.getElementById('userReview').value = "";
    } else {
        alert("рдХреГрдкрдпрд╛ рдирд╛рдо рдФрд░ рдЕрдиреБрднрд╡ рджреЛрдиреЛрдВ рднрд░реЗрдВред");
    }
};

// рд▓рд╛рдЗрд╡ рд░рд┐рд╡реНрдпреВ рд▓реЛрдб рдХрд░рдирд╛
function loadReviews() {
    db.collection("reviews").orderBy("time", "desc").onSnapshot(snap => {
        const list = document.getElementById('reviewsList');
        list.innerHTML = "";
        snap.forEach(doc => {
            const data = doc.data();
            list.innerHTML += `
                <div style="background:#f9f9f9; padding:10px; border-radius:10px; margin-bottom:10px; border-left:4px solid #B22222;">
                    <p style="margin:0; font-weight:bold;">${data.name}</p>
                    <p style="margin:5px 0 0 0; color:#555;">${data.review}</p>
                </div>`;
        });
    });
}
document.addEventListener('DOMContentLoaded', loadReviews);
// --- рд╣рд┐рд╕реНрд╕рд╛ 4: рдкреВрдЬрди рд╡рд┐рднрд╛рдЧ (Detailed Structure) ---

// 1. рдкреВрдЬрди рдХреА рдЧрд╣рд░реА рдЬрд╛рдирдХрд╛рд░реА (Deep Details)
const pujanDetails = {
    'mangal': {
        title: "рдордВрдЧрд▓ рднрд╛рдд рдкреВрдЬрди",
        desc: "рдЙрдЬреНрдЬреИрди рдХреЗ рдордВрдЧрд▓рдирд╛рде рдордВрджрд┐рд░ рдХреЛ рдордВрдЧрд▓ рдЧреНрд░рд╣ рдХреА рдЬрдиреНрдорднреВрдорд┐ рдорд╛рдирд╛ рдЬрд╛рддрд╛ рд╣реИред рдпрд╣рд╛рдБ рднрд╛рдд рдкреВрдЬрди (рдЪрд╛рд╡рд▓ рдЪреЭрд╛рдирд╛) рд╕реЗ рдордВрдЧрд▓ рдЧреНрд░рд╣ рдХреА рд╢рд╛рдВрддрд┐ рд╣реЛрддреА рд╣реИред рдпрд╣ рдкреВрдЬрди рдХреБрдВрдбрд▓реА рдХреЗ рдорд╛рдВрдЧрд▓рд┐рдХ рджреЛрд╖ рдХреЛ рд╢рд╛рдВрдд рдХрд░ рд╡реИрд╡рд╛рд╣рд┐рдХ рдЬреАрд╡рди рдореЗрдВ рд╕реБрдЦ рдФрд░ рд╕рдореГрджреНрдзрд┐ рд▓рд╛рддрд╛ рд╣реИред",
        price: "рд╕рд╛рдорд╛рдиреНрдп рдкреВрдЬрди: 1350тВ╣"
    },
    'kaalsarp': {
        title: "рдХрд╛рд▓рд╕рд░реНрдк рджреЛрд╖ рд╢рд╛рдВрддрд┐",
        desc: "рдЬрдм рд░рд╛рд╣реБ рдФрд░ рдХреЗрддреБ рдХреЗ рдмреАрдЪ рд╕рднреА рдЧреНрд░рд╣ рдЖ рдЬрд╛рддреЗ рд╣реИрдВ, рддрдм рдХрд╛рд▓рд╕рд░реНрдк рджреЛрд╖ рдмрдирддрд╛ рд╣реИред рдЗрд╕рдореЗрдВ рдирд╡рдХреБрд▓ рдЪрд╛рдВрджреА рдХреЗ рдирд╛рдЧ-рдирд╛рдЧрд┐рди рдХрд╛ рд╢рд╛рд╕реНрддреНрд░реЛрдХреНрдд рд╡рд┐рдзрд┐ рд╕реЗ рдкреВрдЬрди рдХрд░ рдЙрдиреНрд╣реЗрдВ рд╡рд┐рд╕рд░реНрдЬрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬрд┐рд╕рд╕реЗ рдЬреАрд╡рди рдХреЗ рд╕рдВрдШрд░реНрд╖ рдХрдо рд╣реЛрддреЗ рд╣реИрдВ рдФрд░ рд░реБрдХреЗ рд╣реБрдП рдХрд╛рд░реНрдп рдкреВрд░реНрдг рд╣реЛрддреЗ рд╣реИрдВред",
        price: "рджреЛрд╖ рдирд┐рд╡рд╛рд░рдг рдкреВрдЬрди: 2100тВ╣ рд╕реЗ рд╢реБрд░реВ"
    },
    'ark': {
        title: "рдЕрд░реНрдХ рд╡рд┐рд╡рд╛рд╣ (рдкреБрд░реБрд╖реЛрдВ рд╣реЗрддреБ)",
        desc: "рдпрджрд┐ рдХрд┐рд╕реА рдкреБрд░реБрд╖ рдХреА рдХреБрдВрдбрд▓реА рдореЗрдВ рдкреНрд░рдмрд▓ рдорд╛рдВрдЧрд▓рд┐рдХ рджреЛрд╖ рд╣реЛ рдпрд╛ рд╡рд┐рд╡рд╛рд╣ рдореЗрдВ рдЕрддреНрдпрдзрд┐рдХ рдмрд╛рдзрд╛ рдЖ рд░рд╣реА рд╣реЛ, рддреЛ рдЕрд░реНрдХ (рдордиреНрджрд╛рд░) рд╡реГрдХреНрд╖ рдХреЗ рд╕рд╛рде рдкреНрд░рддреАрдХрд╛рддреНрдордХ рд╡рд┐рд╡рд╛рд╣ рдХрд░рд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред рдЗрд╕рд╕реЗ рдХреБрдВрдбрд▓реА рдХрд╛ рд╡реИрдзрд╡реНрдп рдпрд╛ рдЕрд▓рдЧрд╛рд╡ рджреЛрд╖ рд╕рдорд╛рдкреНрдд рд╣реЛ рдЬрд╛рддрд╛ рд╣реИред",
        price: "рд╕рдВрдкреВрд░реНрдг рдЕрд░реНрдХ рд╡рд┐рд╡рд╛рд╣: 3100тВ╣"
    },
    'kumbh': {
        title: "рдХреБрдВрдн рд╡рд┐рд╡рд╛рд╣ (рд╕реНрддреНрд░рд┐рдпреЛрдВ рд╣реЗрддреБ)",
        desc: "рд╕реНрддреНрд░рд┐рдпреЛрдВ рдХреА рдХреБрдВрдбрд▓реА рдореЗрдВ рдорд╛рдВрдЧрд▓рд┐рдХ рджреЛрд╖ рдпрд╛ рджреЛ рд╡рд┐рд╡рд╛рд╣ рдХреЗ рдпреЛрдЧ рд╣реЛрдиреЗ рдкрд░ рдХреБрдВрдн рд╡рд┐рд╡рд╛рд╣ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред рдЗрд╕рдореЗрдВ рднрдЧрд╡рд╛рди рд╡рд┐рд╖реНрдгреБ рдХреЗ рд╕реНрд╡рд░реВрдк рдорд┐рдЯреНрдЯреА рдХреЗ рдШрдбрд╝реЗ (рдХреБрдВрдн) рдХреЗ рд╕рд╛рде рд╡рд┐рд╡рд╛рд╣ рд╕рдВрдкрдиреНрди рд╣реЛрддрд╛ рд╣реИ, рдЬрд┐рд╕рд╕реЗ рд╡реИрд╡рд╛рд╣рд┐рдХ рдЬреАрд╡рди рдХреА рдмрд╛рдзрд╛рдПрдВ рджреВрд░ рд╣реЛрддреА рд╣реИрдВред",
        price: "рд╕рдВрдкреВрд░реНрдг рдХреБрдВрдн рд╡рд┐рд╡рд╛рд╣: 3500тВ╣"
    },
    'navgrah': {
        title: "рдирд╡рдЧреНрд░рд╣ рд╢рд╛рдВрддрд┐",
        desc: "рдиреМ рдЧреНрд░рд╣реЛрдВ (рд╕реВрд░реНрдп, рдЪрдВрджреНрд░, рдордВрдЧрд▓, рдмреБрдз, рдЧреБрд░реБ, рд╢реБрдХреНрд░, рд╢рдирд┐, рд░рд╛рд╣реБ, рдХреЗрддреБ) рдХреА рдкреНрд░рддрд┐рдХреВрд▓рддрд╛ рджреВрд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдпрд╣ рдкреВрдЬрди рдЕрдирд┐рд╡рд╛рд░реНрдп рд╣реИред рдЗрд╕рд╕реЗ рд╕реНрд╡рд╛рд╕реНрдереНрдп, рдзрди рдФрд░ рдорд╛рдирд╕рд┐рдХ рд╢рд╛рдВрддрд┐ рдХреА рдкреНрд░рд╛рдкреНрддрд┐ рд╣реЛрддреА рд╣реИред",
        price: "рдирд╡рдЧреНрд░рд╣ рд╢рд╛рдВрддрд┐: 2500тВ╣"
    },
    'baglamukhi': {
        title: "рдорд╛рдБ рдмрдЧрд▓рд╛рдореБрдЦреА рд╣рд╡рди рдкреВрдЬрди",
        desc: "рдорд╛рдБ рдмрдЧрд▓рд╛рдореБрдЦреА рд╕реНрддрдВрднрди рдХреА рджреЗрд╡реА рд╣реИрдВред рдпрд╣ рд╡рд┐рд╢реЗрд╖ рдЕрдиреБрд╖реНрдард╛рди рд╢рддреНрд░реБрдУрдВ рдкрд░ рд╡рд┐рдЬрдп, рдХреЛрд░реНрдЯ-рдХрдЪрд╣рд░реА рд╕реЗ рдореБрдХреНрддрд┐, рд░рд╛рдЬрдиреАрддрд┐ рдореЗрдВ рд╕рдлрд▓рддрд╛ рдФрд░ рддрдВрддреНрд░ рдмрд╛рдзрд╛ рдирд┐рд╡рд╛рд░рдг рд╣реЗрддреБ рдЕрддреНрдпрдВрдд рдкреНрд░рднрд╛рд╡рд╢рд╛рд▓реА рд╣реИред рдЗрд╕реЗ рд╕рд░реНрд╡ рдХрд╛рд░реНрдп рд╕рд┐рджреНрдзрд┐ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред",
        price: "рд╕рд╛рдорд╛рдиреНрдп: 2350тВ╣ | рд╡рд┐рд╢реЗрд╖: 5600тВ╣ | рдорд╣рд╛рд╡рд┐рд╢реЗрд╖: 11000тВ╣"
    }
};

// 2. рдореБрдЦреНрдп рдкреВрдЬрди рдореЗрдиреВ рджрд┐рдЦрд╛рдирд╛
window.showSection = (key) => {
    if (key === 'pujan') {
        renderPujanMenu();
    } else {
        // рдмрд╛рдХреА рд╕реЗрдХреНрд╢рдиреНрд╕ рдХреЗ рд▓рд┐рдП рдкреБрд░рд╛рдирд╛ рд▓реЙрдЬрд┐рдХ
        const content = spiritualContent[key] || "рдЬрд╛рдирдХрд╛рд░реА рдЬрд▓реНрдж рдЙрдкрд▓рдмреНрдз рд╣реЛрдЧреА...";
        document.getElementById('overlay-content').innerHTML = content;
        document.getElementById('overlay').style.display = 'flex';
    }
};

// 3. рдкреВрдЬрди рдХреЗ 6 рд╡рд┐рдХрд▓реНрдкреЛрдВ рдХреА рд▓рд┐рд╕реНрдЯ
function renderPujanMenu() {
    const pujanList = `
        <h2 style="color:#B22222; text-align:center;">ЁЯХЙя╕П рдкреВрдЬрди рд╡рд┐рднрд╛рдЧ</h2>
        <p style="font-size:14px; text-align:center; color:gray;">рдкреВрдЬрди рдХрд╛ рдЪрдпрди рдХрд░реЗрдВ рдФрд░ рд╡рд┐рд╡рд░рдг рджреЗрдЦреЗрдВ</p>
        <div class="pujan-menu">
            <div class="pujan-card" onclick="window.showPujanDetail('mangal')">1. рдордВрдЧрд▓ рднрд╛рдд рдкреВрдЬрди</div>
            <div class="pujan-card" onclick="window.showPujanDetail('kaalsarp')">2. рдХрд╛рд▓рд╕рд░реНрдк рджреЛрд╖ рдирд┐рд╡рд╛рд░рдг</div>
            <div class="pujan-card" onclick="window.showPujanDetail('ark')">3. рдЕрд░реНрдХ рд╡рд┐рд╡рд╛рд╣ (рдкреБрд░реБрд╖)</div>
            <div class="pujan-card" onclick="window.showPujanDetail('kumbh')">4. рдХреБрдВрдн рд╡рд┐рд╡рд╛рд╣ (рд╕реНрддреНрд░реА)</div>
            <div class="pujan-card" onclick="window.showPujanDetail('navgrah')">5. рдирд╡рдЧреНрд░рд╣ рд╢рд╛рдВрддрд┐</div>
            <div class="pujan-card" onclick="window.showPujanDetail('baglamukhi')">6. рдорд╛рдБ рдмрдЧрд▓рд╛рдореБрдЦреА рд╣рд╡рди</div>
        </div>
        <button class="book-now-btn" style="background:#666;" onclick="window.hideSection()">рдмрдВрдж рдХрд░реЗрдВ</button>
    `;
    document.getElementById('overlay-content').innerHTML = pujanList;
    document.getElementById('overlay').style.display = 'flex';
}

// 4. рдХрд┐рд╕реА рдПрдХ рдкреВрдЬрди рдХреА рдЧрд╣рд░реА рдЬрд╛рдирдХрд╛рд░реА рджрд┐рдЦрд╛рдирд╛
window.showPujanDetail = (id) => {
    const data = pujanDetails[id];
    const detailHTML = `
        <h2 style="color:#B22222;">${data.title}</h2>
        <p style="text-align:justify; line-height:1.6; background:#fff8f0; padding:15px; border-radius:10px;">
            ${data.desc}
        </p>
        <button class="book-now-btn" style="background:#FF8C00;" onclick="window.showPujanPrice()">ЁЯТ░ рдкреВрдЬрди рд╢реБрд▓реНрдХ (Price)</button>
        <button class="book-now-btn" style="background:#25D366;" onclick="window.openWhatsApp('рдмреЛрдХрд┐рдВрдЧ: ${data.title}')">ЁЯЪй рдЕрднреА рдмреБрдХ рдХрд░реЗрдВ</button>
        <button class="back-link" style="width:100%; border:none; padding:10px; cursor:pointer;" onclick="renderPujanMenu()">тЖР рд╡рд╛рдкрд╕ рдореЗрдиреВ рдореЗрдВ</button>
    `;
    document.getElementById('overlay-content').innerHTML = detailHTML;
};

// 5. рдкреВрдЬрди рд╢реБрд▓реНрдХ (Price List) рджрд┐рдЦрд╛рдирд╛
window.showPujanPrice = () => {
    const priceHTML = `
        <h2 style="color:#B22222;">ЁЯТ░ рдкреВрдЬрди рд╢реБрд▓реНрдХ рд╡рд┐рд╡рд░рдг</h2>
        <div style="text-align:left; font-size:14px;">
            <div style="background:#eee; padding:10px; border-radius:8px; margin-bottom:10px;">
                <b>рд╕рд╛рдорд╛рдиреНрдп рдордВрдЧрд▓ рднрд╛рдд рдкреВрдЬрди: 1350тВ╣</b><br><small>рдЧрдгреЗрд╢ рдкреВрдЬрди, рдордВрдЧрд▓рдирд╛рде рдЬреА рдкрд░ рднрд╛рдд рдкреВрдЬрдиред</small>
            </div>
            <div style="background:#eee; padding:10px; border-radius:8px; margin-bottom:10px;">
                <b>рдирд╡рдЧреНрд░рд╣ рд╢рд╛рдВрддрд┐: 2500тВ╣</b><br><small>рдЧрдгреЗрд╢, рд╡рд░реБрдг, рдордВрдЧрд▓ рднрд╛рдд рдкреВрдЬрди, рдирд╡рдЧреНрд░рд╣ рдкреВрдЬрди рдПрд╡рдВ рд╣рд╡рдиред</small>
            </div>
            <div style="background:#eee; padding:10px; border-radius:8px; margin-bottom:10px;">
                <b>рдкрдВрдЪрд╛рдВрдЧ рдХрд░реНрдо: 5100тВ╣</b><br><small>рдЧрдгреЗрд╢, рд╡рд░реБрдг, рд╖реЛрдбрд╢ рдорд╛рддреНрд░рд┐рдХрд╛, рдХреБрд▓рджреЗрд╡реА, рдХрд╛рд▓рд╕рд░реНрдк/рдЕрдиреНрдп рджреЛрд╖ рдкреВрдЬрди, рдирд╡рдЧреНрд░рд╣ рдФрд░ рд╣рд╡рдиред</small>
            </div>
            <div style="background:#fdf2f2; padding:10px; border-radius:8px;">
                <b>рдмрдЧрд▓рд╛рдореБрдЦреА рд╣рд╡рди:</b><br>
                рд╕рд╛рдорд╛рдиреНрдп: 2350тВ╣ | рд╡рд┐рд╢реЗрд╖: 5600тВ╣ | рдорд╣рд╛рд╡рд┐рд╢реЗрд╖: 11000тВ╣
            </div>
        </div>
        <button class="book-now-btn" style="background:#25D366;" onclick="window.openWhatsApp('рдкреВрдЬрди рд╢реБрд▓реНрдХ рдЬрд╛рдирдХрд╛рд░реА рдХреЗ рдмрд╛рдж рдмреБрдХрд┐рдВрдЧ')">ЁЯТм WhatsApp рдкрд░ рдмреБрдХ рдХрд░реЗрдВ</button>
        <button class="back-link" style="width:100%; border:none; padding:10px; cursor:pointer;" onclick="renderPujanMenu()">тЖР рд╡рд╛рдкрд╕ рдореЗрдиреВ рдореЗрдВ</button>
    `;
    document.getElementById('overlay-content').innerHTML = priceHTML;
};
// --- рд╣рд┐рд╕реНрд╕рд╛ 4: рд╣рд╡рди рд╡рд┐рднрд╛рдЧ (Detailed Structure) ---

// 1. рд╣рд╡рди рдХреА рдЧрд╣рд░реА рдЬрд╛рдирдХрд╛рд░реА (Deep Details)
const hawanDetails = {
    'baglamukhi_samanya': {
        title: "рдорд╛рдБ рдмрдЧрд▓рд╛рдореБрдЦреА рд╕рд╛рдорд╛рдиреНрдп рд╣рд╡рди",
        desc: "рдпрд╣ рд╣рд╡рди рдореБрдЦреНрдп рд░реВрдк рд╕реЗ рдорд╛рдирд╕рд┐рдХ рд╢рд╛рдВрддрд┐ рдФрд░ рдШрд░ рдХреА рд╕рд╛рдорд╛рдиреНрдп рдмрд╛рдзрд╛рдУрдВ рдХреЛ рджреВрд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред рдЗрд╕рдореЗрдВ рдореБрдЦреНрдп рд░реВрдк рд╕реЗ рдкреАрд▓реА рд╕рд░рд╕реЛрдВ, рд╢реБрджреНрдз рдШреА рдФрд░ рд╕реВрдЦреЗ рдирд╛рд░рд┐рдпрд▓ (рдЧреЛрд▓реЗ) рдХреА рдЖрд╣реБрддрд┐рдпрд╛рдВ рджреА рдЬрд╛рддреА рд╣реИрдВред рдпрд╣ рдорд╛рдВ рдмрдЧрд▓рд╛рдореБрдЦреА рдХреА рдХреГрдкрд╛ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХрд╛ рд╕рд░рд▓ рдПрд╡рдВ рдкреНрд░рднрд╛рд╡реА рдорд╛рд░реНрдЧ рд╣реИред",
        samagri: "рдкреАрд▓реА рд╕рд░рд╕реЛрдВ, рд╢реБрджреНрдз рдЧреМ рдШреГрдд, рд╕реВрдЦрд╛ рдирд╛рд░рд┐рдпрд▓ (рдЧреЛрд▓рд╛)ред",
        price: "рд╢реБрд▓реНрдХ: 2350тВ╣"
    },
    'baglamukhi_vishesh': {
        title: "рдорд╛рдБ рдмрдЧрд▓рд╛рдореБрдЦреА рд╡рд┐рд╢реЗрд╖ рд╣рд╡рди",
        desc: "рд╡рд┐рд╢реЗрд╖ рдХрд╛рд░реНрдпреЛрдВ рдХреА рд╕рд┐рджреНрдзрд┐ рдФрд░ рд╢рддреНрд░реБрдУрдВ рдХреЗ рд╕реНрддрдВрднрди рд╣реЗрддреБ рдпрд╣ рд╣рд╡рди рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред рдЗрд╕рдореЗрдВ 21 рдкреНрд░рдХрд╛рд░ рдХреА рд╡рд┐рд╢реЗрд╖ рдЬрдбрд╝реА-рдмреВрдЯрд┐рдпреЛрдВ рдХрд╛ рдорд┐рд╢реНрд░рдг рддреИрдпрд╛рд░ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред рд▓рд╛рд▓ рдорд┐рд░реНрдЪ рдФрд░ рд╕рд░рд╕реЛрдВ рдХреЗ рд╡рд┐рд╢реЗрд╖ рдкреНрд░рдпреЛрдЧ рд╕реЗ рдирдХрд╛рд░рд╛рддреНрдордХ рд╢рдХреНрддрд┐рдпреЛрдВ рдХрд╛ рдирд╛рд╢ рд╣реЛрддрд╛ рд╣реИ рдФрд░ рдХрд╛рд░реНрдпреЛрдВ рдореЗрдВ рдЖ рд░рд╣реА рдЕреЬрдЪрдиреЗрдВ рджреВрд░ рд╣реЛрддреА рд╣реИрдВред",
        samagri: "21 рдкреНрд░рдХрд╛рд░ рдХреА рджреБрд░реНрд▓рдн рдЬреЬреА-рдмреВрдЯрд┐рдпрд╛рдБ, рд╕реВрдЦреА рд▓рд╛рд▓ рдорд┐рд░реНрдЪ, рдкреАрд▓реА рд╕рд░рд╕реЛрдВ, рдШреА, рдЧреЛрд▓рд╛ред",
        price: "рд╢реБрд▓реНрдХ: 5600тВ╣"
    },
    'baglamukhi_mahavishesh': {
        title: "рдорд╛рдБ рдмрдЧрд▓рд╛рдореБрдЦреА рдорд╣рд╛рд╡рд┐рд╢реЗрд╖ рд╣рд╡рди",
        desc: "рдпрд╣ рдорд╛рдБ рдмрдЧрд▓рд╛рдореБрдЦреА рдХрд╛ рд╕рдмрд╕реЗ рд╢рдХреНрддрд┐рд╢рд╛рд▓реА рдЕрдиреБрд╖реНрдард╛рди рд╣реИред рдШреЛрд░ рддрдВрддреНрд░ рдмрд╛рдзрд╛, рдмреЬреЗ рдЕрджрд╛рд▓рддреА рд╡рд┐рд╡рд╛рдж (рдХреЛрд░реНрдЯ-рдХрдЪрд╣рд░реА), рдЛрдг рдореБрдХреНрддрд┐ рдФрд░ рд░рд╛рдЬрдиреАрддрд┐ рдореЗрдВ рд╡рд┐рдЬрдп рд╣реЗрддреБ рдпрд╣ рдЕрдЪреВрдХ рд╣реИред рдЗрд╕рдореЗрдВ 36 рдкреНрд░рдХрд╛рд░ рдХреА рд╡рд┐рд╢реЗрд╖ рдЬрдбрд╝реА-рдмреВрдЯрд┐рдпреЛрдВ рдХреЗ рд╕рд╛рде рдиреАрдВрдмреВ рдФрд░ рдХрд╛рд▓реА рдорд┐рд░реНрдЪ рдХрд╛ рддрд╛рдВрддреНрд░рд┐рдХ рд╡рд┐рдзрд╛рди рд╕реЗ рдкреНрд░рдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬреЛ рд╕рд░реНрд╡ рдХрд╛рд░реНрдп рд╕рд┐рджреНрдзрд┐ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред",
        samagri: "36 рдкреНрд░рдХрд╛рд░ рдХреА рдЬреЬреА-рдмреВрдЯрд┐рдпрд╛рдБ, рдиреАрдВрдмреВ, рдХрд╛рд▓реА рдорд┐рд░реНрдЪ, рд╕реВрдЦреА рд▓рд╛рд▓ рдорд┐рд░реНрдЪ, рд╕рд░рд╕реЛрдВ, рдШреА, рдЧреЛрд▓рд╛ред",
        price: "рд╢реБрд▓реНрдХ: 11000тВ╣"
    }
};

// 2. рд╣рд╡рди рдореЗрдиреВ рдХреЛ рд░реЗрдВрдбрд░ рдХрд░рдирд╛ (Update existing showSection)
const originalShowSection = window.showSection; // рдкреБрд░рд╛рдиреЗ рдлрдВрдХреНрд╢рди рдХрд╛ рдмреИрдХрдЕрдк
window.showSection = (key) => {
    if (key === 'hawan') {
        renderHawanMenu();
    } else if (key === 'pujan') {
        renderPujanMenu(); // рдкреВрдЬрди рд╡рд┐рднрд╛рдЧ рд╡рд╛рд▓рд╛ рдкрд┐рдЫрд▓рд╛ рдХреЛрдб
    } else {
        originalShowSection(key);
    }
};

// 3. рд╣рд╡рди рдХреЗ рд╡рд┐рдХрд▓реНрдкреЛрдВ рдХреА рд▓рд┐рд╕реНрдЯ
function renderHawanMenu() {
    const hawanList = `
        <h2 style="color:#B22222; text-align:center;">ЁЯФе рд╣рд╡рди рд╡рд┐рднрд╛рдЧ</h2>
        <p style="font-size:14px; text-align:center; padding:0 10px;">рдорд╛рдБ рдмрдЧрд▓рд╛рдореБрдЦреА рд╣рд╡рди рдкреВрдЬрди рд╕реЗ рд╢рддреНрд░реБрдУрдВ рдкрд░ рд╡рд┐рдЬрдп, рдХреЛрд░реНрдЯ-рдХрдЪрд╣рд░реА рд╕реЗ рдореБрдХреНрддрд┐ рдФрд░ рд╕рд░реНрд╡ рдХрд╛рд░реНрдп рд╕рд┐рджреНрдзрд┐ рдкреНрд░рд╛рдкреНрдд рд╣реЛрддреА рд╣реИред</p>
        <div class="pujan-menu">
            <div class="pujan-card" onclick="window.showHawanDetail('baglamukhi_samanya')">тЬи рдорд╛рдБ рдмрдЧрд▓рд╛рдореБрдЦреА рд╕рд╛рдорд╛рдиреНрдп рд╣рд╡рди</div>
            <div class="pujan-card" onclick="window.showHawanDetail('baglamukhi_vishesh')">ЁЯЪй рдорд╛рдБ рдмрдЧрд▓рд╛рдореБрдЦреА рд╡рд┐рд╢реЗрд╖ рд╣рд╡рди</div>
            <div class="pujan-card" onclick="window.showHawanDetail('baglamukhi_mahavishesh')">ЁЯФ▒ рдорд╛рдБ рдмрдЧрд▓рд╛рдореБрдЦреА рдорд╣рд╛рд╡рд┐рд╢реЗрд╖ рд╣рд╡рди</div>
        </div>
        <button class="book-now-btn" style="background:#666;" onclick="window.hideSection()">рдмрдВрдж рдХрд░реЗрдВ</button>
    `;
    document.getElementById('overlay-content').innerHTML = hawanList;
    document.getElementById('overlay').style.display = 'flex';
}

// 4. рд╣рд╡рди рдХреА рдЧрд╣рд░реА рдЬрд╛рдирдХрд╛рд░реА рджрд┐рдЦрд╛рдирд╛
window.showHawanDetail = (id) => {
    const data = hawanDetails[id];
    const detailHTML = `
        <h2 style="color:#B22222;">${data.title}</h2>
        <div style="text-align:justify; line-height:1.6; background:#fffcf0; padding:15px; border-radius:10px; border-left:4px solid #FFD700;">
            <p><b>рд▓рд╛рдн:</b> ${data.desc}</p>
            <p><b>рдореБрдЦреНрдп рд╕рд╛рдордЧреНрд░реА:</b> ${data.samagri}</p>
        </div>
        <button class="book-now-btn" style="background:#FF8C00;" onclick="window.showHawanPrice()">ЁЯТ░ рд╣рд╡рди рд╢реБрд▓реНрдХ (Price)</button>
        <button class="book-now-btn" style="background:#25D366;" onclick="window.openWhatsApp('рд╣рд╡рди рдмреБрдХрд┐рдВрдЧ: ${data.title}')">ЁЯФе рдЕрднреА рдЕрдиреБрд╖реНрдард╛рди рдмреБрдХ рдХрд░реЗрдВ</button>
        <button class="back-link" style="width:100%; border:none; padding:10px; cursor:pointer;" onclick="renderHawanMenu()">тЖР рд╡рд╛рдкрд╕ рд╣рд╡рди рдореЗрдиреВ</button>
    `;
    document.getElementById('overlay-content').innerHTML = detailHTML;
};

// 5. рд╣рд╡рди рд╢реБрд▓реНрдХ (Hawan Price List)
window.showHawanPrice = () => {
    const priceHTML = `
        <h2 style="color:#B22222;">ЁЯТ░ рд╣рд╡рди рд╢реБрд▓реНрдХ рд╡рд┐рд╡рд░рдг</h2>
        <div style="text-align:left; font-size:14px;">
            <div style="background:#f9f9f9; padding:12px; border-radius:8px; margin-bottom:10px; border-right:4px solid #B22222;">
                <b>рдмрдЧрд▓рд╛рдореБрдЦреА рд╕рд╛рдорд╛рдиреНрдп рд╣рд╡рди: 2350тВ╣</b><br><small>рд╕рд░рд╕реЛрдВ, рдШреА, рдЧреЛрд▓рд╛ рджреНрд╡рд╛рд░рд╛ рдкреВрдЬрди рдПрд╡рдВ рд╣рд╡рдиред</small>
            </div>
            <div style="background:#f9f9f9; padding:12px; border-radius:8px; margin-bottom:10px; border-right:4px solid #B22222;">
                <b>рдмрдЧрд▓рд╛рдореБрдЦреА рд╡рд┐рд╢реЗрд╖ рд╣рд╡рди: 5600тВ╣</b><br><small>21 рдЬрдбрд╝реА-рдмреВрдЯрд┐рдпрд╛рдБ, рд▓рд╛рд▓ рдорд┐рд░реНрдЪ, рд╕рд░рд╕реЛрдВ, рдШреА, рдЧреЛрд▓рд╛ рджреНрд╡рд╛рд░рд╛ рд╣рд╡рдиред</small>
            </div>
            <div style="background:#f9f9f9; padding:12px; border-radius:8px; margin-bottom:10px; border-right:4px solid #B22222;">
                <b>рдмрдЧрд▓рд╛рдореБрдЦреА рдорд╣рд╛рд╡рд┐рд╢реЗрд╖ рд╣рд╡рди: 11000тВ╣</b><br><small>36 рдЬрдбрд╝реА-рдмреВрдЯрд┐рдпрд╛рдБ, рдиреАрдВрдмреВ, рдХрд╛рд▓реА рдорд┐рд░реНрдЪ, рд▓рд╛рд▓ рдорд┐рд░реНрдЪ, рд╕рд░рд╕реЛрдВ, рдШреА, рдЧреЛрд▓рд╛ред</small>
            </div>
            <div style="background:#fff3cd; padding:10px; border-radius:8px; font-weight:bold; text-align:center;">
                рдиреЛрдЯ: рдкрдВрдЪрд╛рдВрдЧ рдХрд░реНрдо (рджреЛрд╖ рд╢рд╛рдВрддрд┐ рд╕рд╣рд┐рдд) - 5100тВ╣
            </div>
        </div>
        <button class="book-now-btn" style="background:#25D366;" onclick="window.openWhatsApp('рд╣рд╡рди рд╢реБрд▓реНрдХ рджреЗрдЦрдиреЗ рдХреЗ рдмрд╛рдж рдмреБрдХрд┐рдВрдЧ')">ЁЯТм WhatsApp рдкрд░ рд╕рдВрдкрд░реНрдХ рдХрд░реЗрдВ</button>
        <button class="back-link" style="width:100%; border:none; padding:10px; cursor:pointer;" onclick="renderHawanMenu()">тЖР рд╡рд╛рдкрд╕ рд╣рд╡рди рдореЗрдиреВ</button>
    `;
    document.getElementById('overlay-content').innerHTML = priceHTML;
};
// --- рд╣рд┐рд╕реНрд╕рд╛ 4: рдХреБрдВрдбрд▓реА рд╡рд┐рднрд╛рдЧ (Detailed Structure) ---

// 1. рдХреБрдВрдбрд▓реА рд╕реЗрд╡рд╛ рдХреА рдЧрд╣рд░реА рдЬрд╛рдирдХрд╛рд░реА
const kundliDetails = {
    'nirman': {
        title: "рдХреБрдВрдбрд▓реА рдирд┐рд░реНрдорд╛рдг (рдирдпрд╛ рдЪрд╛рд░реНрдЯ рдмрдирд╛рдирд╛)",
        desc: "рд╢рд╛рд╕реНрддреНрд░реЛрдВ рдХреЗ рдЕрдиреБрд╕рд╛рд░, рдХреБрдВрдбрд▓реА рдПрдХ рд╡реНрдпрдХреНрддрд┐ рдХреЗ рдЬреАрд╡рди рдХрд╛ рдорд╛рдирдЪрд┐рддреНрд░ рд╣реИред рд╣рдо рдЖрдкрдХреА рдЬрдиреНрдо рддрд┐рдерд┐, рд╕рдордп рдФрд░ рд╕реНрдерд╛рди рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рд╕рдЯреАрдХ рдФрд░ рд╡рд┐рд╕реНрддреГрдд рдХреБрдВрдбрд▓реА рддреИрдпрд╛рд░ рдХрд░рддреЗ рд╣реИрдВред рдЗрд╕рдореЗрдВ рдЖрдкрдХреЗ рдЬреАрд╡рди рдХреЗ рд╡рд┐рднрд┐рдиреНрди рдкрд╣рд▓реБрдУрдВ, рдЬреИрд╕реЗ рд╢рд┐рдХреНрд╖рд╛, рдХрд░рд┐рдпрд░, рд╕реНрд╡рд╛рд╕реНрдереНрдп рдФрд░ рднрд╛рдЧреНрдп рдХрд╛ рдкреВрд░рд╛ рд╡рд┐рд╡рд░рдг рд╣реЛрддрд╛ рд╣реИред",
        benefit: "рд╢реБрджреНрдз рдЧрдгрдирд╛, рд╕рдЯреАрдХ рджрд╢рд╛ рд╡рд┐рд╡рд░рдг рдФрд░ рднрд╡рд┐рд╖реНрдпрдлрд▓ рдХреЗ рд╕рд╛рде рдкреВрд░реНрдг рдХреБрдВрдбрд▓реА рдлрд╛рдЗрд▓ред",
        price: "рдирд┐рд░реНрдорд╛рдг рд╢реБрд▓реНрдХ: 2100тВ╣"
    },
    'v рд╡рд┐рд╢реНрд▓реЗрд╖рдг': {
        title: "рдХреБрдВрдбрд▓реА рд╡рд┐рд╢реНрд▓реЗрд╖рдг (рдкрд░рд╛рдорд░реНрд╢)",
        desc: "рдпрджрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ рдкрд╣рд▓реЗ рд╕реЗ рдХреБрдВрдбрд▓реА рд╣реИ рдФрд░ рдЖрдк рдЕрдкрдиреЗ рдЬреАрд╡рди рдХреА рд╕рдорд╕реНрдпрд╛рдУрдВ рдХрд╛ рд╕рдорд╛рдзрд╛рди рдЪрд╛рд╣рддреЗ рд╣реИрдВ, рддреЛ рдпрд╣ рд╕реЗрд╡рд╛ рдЖрдкрдХреЗ рд▓рд┐рдП рд╣реИред рдкрдВрдбрд┐рдд рдЬреА рдЖрдкрдХреА рдХреБрдВрдбрд▓реА рдХреЗ рдЧреНрд░рд╣реЛрдВ рдХреА рд╕реНрдерд┐рддрд┐ рджреЗрдЦрдХрд░ рдЖрдкрдХреЗ рд╕рд╡рд╛рд▓реЛрдВ (рд╡рд┐рд╡рд╛рд╣, рд╡реНрдпрд╛рдкрд╛рд░, рд░реЛрдЧ, рд╢рддреНрд░реБ) рдХреЗ рд╕рдЯреАрдХ рдЙрддреНрддрд░ рдФрд░ рдкреНрд░рднрд╛рд╡рд╢рд╛рд▓реА рдЬреНрдпреЛрддрд┐рд╖реАрдп рдЙрдкрд╛рдп рдкреНрд░рджрд╛рди рдХрд░рддреЗ рд╣реИрдВред",
        benefit: "рд╕рдорд╕реНрдпрд╛ рдХрд╛ рд╕рдорд╛рдзрд╛рди, рдЧреНрд░рд╣реЛрдВ рдХреЗ рджреЛрд╖ рджреВрд░ рдХрд░рдиреЗ рдХреЗ рдЙрдкрд╛рдп рдФрд░ рдЙрдЪрд┐рдд рд░рддреНрди рд╕рд▓рд╛рд╣ред",
        price: "рд╡рд┐рд╢реНрд▓реЗрд╖рдг рд╢реБрд▓реНрдХ: 500тВ╣"
    }
};

// 2. рдХреБрдВрдбрд▓реА рдореЗрдиреВ рдХреЛ рдЕрдкрдбреЗрдЯ рдХрд░рдирд╛ (showSection рдлрдВрдХреНрд╢рди рдореЗрдВ рдЬреЛреЬреЗрдВ)
const prevShowSection = window.showSection; 
window.showSection = (key) => {
    if (key === 'kundli') {
        renderKundliMenu();
    } else if (key === 'hawan') {
        renderHawanMenu();
    } else if (key === 'pujan') {
        renderPujanMenu();
    } else {
        prevShowSection(key);
    }
};

// 3. рдХреБрдВрдбрд▓реА рдХреЗ рд╡рд┐рдХрд▓реНрдкреЛрдВ рдХреА рд▓рд┐рд╕реНрдЯ
function renderKundliMenu() {
    const kundliList = `
        <h2 style="color:#B22222; text-align:center;">ЁЯУЬ рдХреБрдВрдбрд▓реА рд╡рд┐рднрд╛рдЧ</h2>
        <p style="font-size:14px; text-align:center; padding:0 10px;">рдЕрдкрдиреА рдЬрдиреНрдо рдХреБрдВрдбрд▓реА рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЕрдкрдиреЗ рднрд╡рд┐рд╖реНрдп рдФрд░ рдЧреНрд░рд╣реЛрдВ рдХреА рд╕реНрдерд┐рддрд┐ рдХреЛ рдЬрд╛рдиреЗрдВред</p>
        <div class="pujan-menu">
            <div class="pujan-card" onclick="window.showKundliDetail('nirman')">ЁЯУД рдХреБрдВрдбрд▓реА рдирд┐рд░реНрдорд╛рдг (New Kundli)</div>
            <div class="pujan-card" onclick="window.showKundliDetail('v рд╡рд┐рд╢реНрд▓реЗрд╖рдг')">ЁЯФН рдХреБрдВрдбрд▓реА рд╡рд┐рд╢реНрд▓реЗрд╖рдг (Consultation)</div>
        </div>
        <button class="book-now-btn" style="background:#666;" onclick="window.hideSection()">рдмрдВрдж рдХрд░реЗрдВ</button>
    `;
    document.getElementById('overlay-content').innerHTML = kundliList;
    document.getElementById('overlay').style.display = 'flex';
}

// 4. рдХреБрдВрдбрд▓реА рдХреА рдЧрд╣рд░реА рдЬрд╛рдирдХрд╛рд░реА рджрд┐рдЦрд╛рдирд╛
window.showKundliDetail = (id) => {
    const data = kundliDetails[id];
    const detailHTML = `
        <h2 style="color:#B22222;">${data.title}</h2>
        <div style="text-align:justify; line-height:1.6; background:#f0f7ff; padding:15px; border-radius:10px; border-left:4px solid #1877F2;">
            <p><b>рд╡рд┐рд╡рд░рдг:</b> ${data.desc}</p>
            <p><b>рд▓рд╛рдн:</b> ${data.benefit}</p>
        </div>
        <button class="book-now-btn" style="background:#FF8C00;" onclick="window.showKundliPrice('${id}')">ЁЯТ░ рд╕реЗрд╡рд╛ рд╢реБрд▓реНрдХ (Price)</button>
        <button class="book-now-btn" style="background:#25D366;" onclick="window.openWhatsApp('рдХреБрдВрдбрд▓реА рд╕реЗрд╡рд╛: ${data.title}')">ЁЯУЬ рдЕрднреА рдкрд░рд╛рдорд░реНрд╢ рд▓реЗрдВ</button>
        <button class="back-link" style="width:100%; border:none; padding:10px; cursor:pointer;" onclick="renderKundliMenu()">тЖР рд╡рд╛рдкрд╕ рдХреБрдВрдбрд▓реА рдореЗрдиреВ</button>
    `;
    document.getElementById('overlay-content').innerHTML = detailHTML;
};

// 5. рдХреБрдВрдбрд▓реА рд╢реБрд▓реНрдХ (Kundli Price List)
window.showKundliPrice = (id) => {
    const data = kundliDetails[id];
    const priceHTML = `
        <h2 style="color:#B22222;">ЁЯТ░ рд╕реЗрд╡рд╛ рд╢реБрд▓реНрдХ</h2>
        <div style="text-align:center; padding:20px;">
            <div style="background:#f9f9f9; padding:20px; border-radius:15px; border:2px dashed #B22222; display:inline-block; min-width:200px;">
                <span style="font-size:16px;">${data.title}</span><br>
                <span style="font-size:28px; font-weight:bold; color:#B22222;">${data.price}</span>
            </div>
            <p style="margin-top:15px; font-size:13px; color:#555;">рдиреЛрдЯ: рд╕рдЯреАрдХ рдЧрдгрдирд╛ рдХреЗ рд▓рд┐рдП рдЬрдиреНрдо рдХрд╛ рд╕рд╣реА рд╕рдордп рдФрд░ рд╕реНрдерд╛рди рдЖрд╡рд╢реНрдпрдХ рд╣реИред</p>
        </div>
        <button class="book-now-btn" style="background:#25D366;" onclick="window.openWhatsApp('рд╢реБрд▓реНрдХ рджреЗрдЦрдиреЗ рдХреЗ рдмрд╛рдж ${data.title} рдмреБрдХрд┐рдВрдЧ')">ЁЯТм WhatsApp рдкрд░ рдЬрд╛рдирдХрд╛рд░реА рднреЗрдЬреЗрдВ</button>
        <button class="back-link" style="width:100%; border:none; padding:10px; cursor:pointer;" onclick="window.showKundliDetail('${id}')">тЖР рд╡рд╛рдкрд╕ рд╡рд┐рд╡рд░рдг рдкрд░</button>
    `;
    document.getElementById('overlay-content').innerHTML = priceHTML;
};


// --- рд╣рд┐рд╕реНрд╕рд╛ 6: рд▓рд╛рдЗрд╡ рд░рд┐рд╡реНрдпреВ рд╕рд┐рд╕реНрдЯрдо ---

// 1. рд░рд┐рд╡реНрдпреВ рдХреЛ рдбреЗрдЯрд╛рдмреЗрд╕ рдореЗрдВ рд╕реЗрд╡ рдХрд░рдирд╛
window.saveReview = async () => {
    const name = document.getElementById('userName').value;
    const review = document.getElementById('userReview').value;
    
    if (name && review) {
        try {
            await db.collection("reviews").add({
                name: name,
                review: review,
                time: firebase.firestore.FieldValue.serverTimestamp() // рдЕрд╕рд▓реА рд╕рдордп рд▓реЗрдЧрд╛
            });
            alert("ЁЯЩП рдЖрдкрдХрд╛ рдЕрдиреБрднрд╡ рд╕рд╛рдЭрд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдзрдиреНрдпрд╡рд╛рдж!");
            document.getElementById('userName').value = "";
            document.getElementById('userReview').value = "";
        } catch (error) {
            console.error("Error adding review: ", error);
        }
    } else {
        alert("рдХреГрдкрдпрд╛ рдЕрдкрдирд╛ рдирд╛рдо рдФрд░ рдЕрдиреБрднрд╡ рджреЛрдиреЛрдВ рднрд░реЗрдВред");
    }
};

// 2. рд▓рд╛рдЗрд╡ рд░рд┐рд╡реНрдпреВ рдХреЛ рд╕реНрдХреНрд░реАрди рдкрд░ рджрд┐рдЦрд╛рдирд╛ (Live Listener)
function displayLiveReviews() {
    const list = document.getElementById('reviewsList');
    
    // рдпрд╣ рдХреЛрдб рдбреЗрдЯрд╛рдмреЗрд╕ рдкрд░ рдиреЫрд░ рд░рдЦреЗрдЧрд╛, рдЬреИрд╕реЗ рд╣реА рдирдпрд╛ рд░рд┐рд╡реНрдпреВ рдЖрдПрдЧрд╛, рддреБрд░рдВрдд рджрд┐рдЦрд╛рдПрдЧрд╛
    db.collection("reviews").orderBy("time", "desc").onSnapshot((querySnapshot) => {
        list.innerHTML = ""; // рдкреБрд░рд╛рдирд╛ рдбреЗрдЯрд╛ рд╕рд╛реЮ рдХрд░реЗрдВ
        querySnapshot.forEach((doc) => {
            const d = doc.data();
            list.innerHTML += `
                <div style="background: white; padding: 15px; border-radius: 10px; margin-bottom: 15px; border-left: 5px solid #B22222; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
                    <p style="margin: 0; font-size: 16px; font-weight: bold; color: #333;">${d.name}</p>
                    <p style="margin: 5px 0 0 0; color: #555; font-style: italic;">"${d.review}"</p>
                </div>
            `;
        });
    });
}
// --- рд╣рд┐рд╕реНрд╕рд╛ 5: рдПрдбрд╡рд╛рдВрд╕ рдХреНрд╡рд┐рдЬрд╝ рд▓реЙрдЬрд┐рдХ (150 рд░реИрдВрдбрдо рдкреНрд░рд╢реНрди) ---

// 1. 150 рдкреНрд░рд╢реНрдиреЛрдВ рдХрд╛ рдПрд░реЗ (рдпрд╣рд╛рдБ рдореИрдВрдиреЗ рдЖрдкрдХреА рд▓рд┐рд╕реНрдЯ рдХреЛ рдХреЛрдб рдореЗрдВ рдмрджрд▓ рджрд┐рдпрд╛ рд╣реИ)
const krishnaQuizBank = [
    { q: "рднрдЧрд╡рд╛рди рд╢реНрд░реА рдХреГрд╖реНрдг рдХрд╛ рдЬрдиреНрдо рдХрд╣рд╛рдБ рд╣реБрдЖ рдерд╛?", options: ["рд╡реГрдВрджрд╛рд╡рди", "рдордереБрд░рд╛", "рджреНрд╡рд╛рд░рдХрд╛", "рдЧреЛрдХреБрд▓"], a: 1 },
    { q: "рд╢реНрд░реА рдХреГрд╖реНрдг рдХреЗ рдкрд┐рддрд╛ рдХреМрди рдереЗ?", options: ["рдирдВрдж рдмрд╛рдмрд╛", "рд╡рд╕реБрджреЗрд╡", "рдЕрд░реНрдЬреБрди", "рдХрдВрд╕"], a: 1 },
    { q: "рд╢реНрд░реА рдХреГрд╖реНрдг рдХреА рдорд╛рддрд╛ рдХреМрди рдереАрдВ?", options: ["рдпрд╢рджрд╛", "рд░реБрдХреНрдорд┐рдгреА", "рджреЗрд╡рдХреА", "рдХреБрдВрддреА"], a: 2 },
    { q: "рд╢реНрд░реА рдХреГрд╖реНрдг рдХреЗ рдкрд╛рд▓рди-рдкреЛрд╖рдг рдХрд┐рд╕рдиреЗ рдХрд┐рдпрд╛?", options: ["рд╡рд╕реБрджреЗрд╡", "рдирдВрдж рдмрд╛рдмрд╛ рдФрд░ рдпрд╢реЛрджрд╛", "рдХрдВрд╕", "рдЕрд░реНрдЬреБрди"], a: 1 },
    { q: "рдХрдВрд╕ рдХреМрди рдерд╛?", options: ["рдХреГрд╖реНрдг рдХрд╛ рдорд┐рддреНрд░", "рдХреГрд╖реНрдг рдХрд╛ рдорд╛рдорд╛", "рдХреГрд╖реНрдг рдХрд╛ рднрд╛рдИ", "рдХреГрд╖реНрдг рдХрд╛ рдЧреБрд░реБ"], a: 1 },
    { q: "рдХреГрд╖реНрдг рдЬрдиреНрдорд╛рд╖реНрдЯрдореА рдХрдм рдордирд╛рдИ рдЬрд╛рддреА рд╣реИ?", options: ["рднрд╛рджреНрд░рдкрдж рдХреГрд╖реНрдг рдЕрд╖реНрдЯрдореА", "рдЪреИрддреНрд░ рдкреВрд░реНрдгрд┐рдорд╛", "рдХрд╛рд░реНрддрд┐рдХ рдЕрдорд╛рд╡рд╕реНрдпрд╛", "рд╢реНрд░рд╛рд╡рдг рдкреВрд░реНрдгрд┐рдорд╛"], a: 0 },
    { q: "рд╢реНрд░реА рдХреГрд╖реНрдг рдХрд╛ рдмрдЪрдкрди рдХрд╛ рдирд╛рдо рдХреНрдпрд╛ рдерд╛?", options: ["рдорд╛рдзрд╡", "рдХрд╛рдиреНрд╣рд╛", "рдЧреЛрд╡рд┐рдВрдж", "рд╡рд╛рд╕реБрджреЗрд╡"], a: 1 },
    { q: "рд╢реНрд░реА рдХреГрд╖реНрдг рдиреЗ рдЧреЛрд╡рд░реНрдзрди рдкрд░реНрд╡рдд рдХреНрдпреЛрдВ рдЙрдард╛рдпрд╛?", options: ["рдЦреЗрд▓ рдХреЗ рд▓рд┐рдП", "рдЗрдВрджреНрд░ рдХреЗ рдХреНрд░реЛрдз рд╕реЗ рдмрдЪрд╛рдиреЗ рдХреЗ рд▓рд┐рдП", "рдпреБрджреНрдз рдХреЗ рд▓рд┐рдП", "рдкреВрдЬрд╛ рдХреЗ рд▓рд┐рдП"], a: 1 },
    { q: "рдХрд╛рд▓рд┐рдп рдирд╛рдЧ рдХрд┐рд╕ рдирджреА рдореЗрдВ рд░рд╣рддрд╛ рдерд╛?", options: ["рдЧрдВрдЧрд╛", "рд╕рд░рд╕реНрд╡рддреА", "рдпрдореБрдирд╛", "рдЧреЛрджрд╛рд╡рд░реА"], a: 2 },
    { q: "рд╢реНрд░реА рдХреГрд╖реНрдг рдХреЗ рдЧреБрд░реБ рдХреМрди рдереЗ?", options: ["рд╡рд╢рд┐рд╖реНрда", "рд╕рдВрджреАрдкрдирд┐", "рджреНрд░реЛрдгрд╛рдЪрд╛рд░реНрдп", "рдкрд░рд╢реБрд░рд╛рдо"], a: 1 },
    { q: "рд╢реНрд░реА рдХреГрд╖реНрдг рдиреЗ рдХрдВрд╕ рдХрд╛ рд╡рдз рдХрд╣рд╛рдБ рдХрд┐рдпрд╛?", options: ["рд╡реГрдВрджрд╛рд╡рди", "рдордереБрд░рд╛", "рджреНрд╡рд╛рд░рдХрд╛", "рд╣рд╕реНрддрд┐рдирд╛рдкреБрд░"], a: 1 },
    { q: "рд╢реНрд░реА рдХреГрд╖реНрдг рдХреЗ рдкреНрд░рд┐рдп рдорд┐рддреНрд░ рдХреМрди рдереЗ?", options: ["рднреАрдо", "рдЕрд░реНрдЬреБрди", "рд╕реБрджрд╛рдорд╛", "рдирдХреБрд▓"], a: 2 },
    { q: "рднрдЧрд╡рдж рдЧреАрддрд╛ рдХрд╛ рдЙрдкрджреЗрд╢ рдХрд┐рд╕реЗ рджрд┐рдпрд╛ рдЧрдпрд╛?", options: ["рднреАрдо", "рдЕрд░реНрдЬреБрди", "рдпреБрдзрд┐рд╖реНрдард┐рд░", "рджреБрд░реНрдпреЛрдзрди"], a: 1 },
    { q: "рдорд╣рд╛рднрд╛рд░рдд рдХрд╛ рдпреБрджреНрдз рдХрд╣рд╛рдБ рд╣реБрдЖ рдерд╛?", options: ["рджреНрд╡рд╛рд░рдХрд╛", "рдордереБрд░рд╛", "рдХреБрд░реБрдХреНрд╖реЗрддреНрд░", "рдХрд╛рд╢реА"], a: 2 },
    { q: "рд╢реНрд░реА рдХреГрд╖реНрдг рдиреЗ рдпреБрджреНрдз рдореЗрдВ рдХреНрдпрд╛ рднреВрдорд┐рдХрд╛ рдирд┐рднрд╛рдИ?", options: ["рд╕реИрдирд┐рдХ", "рд░рд╛рдЬрд╛", "рд╕рд╛рд░рдереА", "рдЧреБрд░реБ"], a: 2 },
    { q: "рд░рд╛рдзрд╛ рдЬреА рдХрд╛ рд╕рдВрдмрдВрдз рдХрд┐рд╕ рд╕реНрдерд╛рди рд╕реЗ рд╣реИ?", options: ["рджреНрд╡рд╛рд░рдХрд╛", "рд╡реГрдВрджрд╛рд╡рди", "рдордереБрд░рд╛", "рдХрд╛рд╢реА"], a: 1 },
    { q: "рд╢реНрд░реА рдХреГрд╖реНрдг рдХреА рд░рд╛рдЬрдзрд╛рдиреА рдХреМрди рд╕реА рдереА?", options: ["рдордереБрд░рд╛", "рджреНрд╡рд╛рд░рдХрд╛", "рд╣рд╕реНрддрд┐рдирд╛рдкреБрд░", "рдЕрдпреЛрдзреНрдпрд╛"], a: 1 },
    { q: "рд╢реНрд░реА рдХреГрд╖реНрдг рдХрд╛ рд╢рдВрдЦ рдХреНрдпрд╛ рдХрд╣рд▓рд╛рддрд╛ рд╣реИ?", options: ["рджреЗрд╡рджрддреНрдд", "рдкрдВрдЪрдЬрдиреНрдп", "рд╕реБрджрд░реНрд╢рди", "рдХреМрдореЛрджрдХреА"], a: 1 },
    { q: "рд╢реНрд░реА рдХреГрд╖реНрдг рдХрд╛ рдЪрдХреНрд░ рдХреНрдпрд╛ рдХрд╣рд▓рд╛рддрд╛ рд╣реИ?", options: ["рдХреМрдореЛрджрдХреА", "рд╕реБрджрд░реНрд╢рди рдЪрдХреНрд░", "рдкрдВрдЪрдЬрдиреНрдп", "рдмреНрд░рд╣реНрдорд╛рд╕реНрддреНрд░"], a: 1 },
    { q: "рд╢реНрд░реА рдХреГрд╖реНрдг рдХреА рдкрддреНрдиреА рдХреМрди рдереАрдВ?", options: ["рд░реБрдХреНрдорд┐рдгреА", "рдХреБрдВрддреА", "рджреНрд░реМрдкрджреА", "рд╕реАрддрд╛"], a: 0 },
    { q: "рд╕реБрджрд╛рдорд╛ рдХрд┐рд╕ рдЧрд╛рдБрд╡ рд╕реЗ рдЖрдП рдереЗ?", options: ["рдордереБрд░рд╛", "рдкреЛрд░рдмрдВрджрд░", "рджреНрд╡рд╛рд░рдХрд╛", "рдЙрдЬреНрдЬреИрди"], a: 1 },
    { q: "рд╢реНрд░реА рдХреГрд╖реНрдг рдиреЗ рдХрд┐рд╕ рдЕрд╕реБрд░ рдХрд╛ рд╡рдз рдмрд╛рд▓реНрдпрдХрд╛рд▓ рдореЗрдВ рдХрд┐рдпрд╛?", options: ["рд░рд╛рд╡рдг", "рдкреВрддрдирд╛", "рдореЗрдШрдирд╛рдж", "рд╣рд┐рд░рдгреНрдпрдХрд╢реНрдпрдк"], a: 1 },
    { q: "рд╢реНрд░реА рдХреГрд╖реНрдг рдХрд╛ рдПрдХ рдЕрдиреНрдп рдирд╛рдо рдХреНрдпрд╛ рд╣реИ?", options: ["рдирд╛рд░рд╛рдпрдг", "рдЧреЛрд╡рд┐рдВрдж", "рд╢рд┐рд╡", "рдмреНрд░рд╣реНрдорд╛"], a: 1 },
    { q: "рдХреГрд╖реНрдг рдХрд┐рд╕ рд╡рдВрд╢ рдореЗрдВ рдЬрдиреНрдореЗ рдереЗ?", options: ["рд╕реВрд░реНрдпрд╡рдВрд╢", "рдпрд╛рджрд╡ рд╡рдВрд╢", "рдЪрдВрджреНрд░рд╡рдВрд╢", "рд░рдШреБрд╡рдВрд╢"], a: 1 },
    { q: "рд╢реНрд░реА рдХреГрд╖реНрдг рдХрд╛ рд╡рд░реНрдг рдХреИрд╕рд╛ рдмрддрд╛рдпрд╛ рдЧрдпрд╛ рд╣реИ?", options: ["рдЧреМрд░", "рд╢реНрдпрд╛рдо", "рд▓рд╛рд▓", "рдкреАрд▓рд╛"], a: 1 },
    { q: "рд╢реНрд░реА рдХреГрд╖реНрдг рдХреЛ рдорд╛рдЦрдирдЪреЛрд░ рдХреНрдпреЛрдВ рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ?", options: ["рд╡реЗ рдордХреНрдЦрди рдмреЗрдЪрддреЗ рдереЗ", "рд╡реЗ рдордХреНрдЦрди рдЪреБрд░рд╛рддреЗ рдереЗ", "рд╡реЗ рдордХреНрдЦрди рдмрдирд╛рддреЗ рдереЗ", "рд╡реЗ рдордХреНрдЦрди рджрд╛рди рдХрд░рддреЗ рдереЗ"], a: 1 },
    { q: "рдкреВрддрдирд╛ рдХрд┐рд╕ рд░реВрдк рдореЗрдВ рдЖрдИ рдереА?", options: ["рд░рд╛рдХреНрд╖рд╕", "рд╕рд╛рдзреБ", "рд╕реБрдВрджрд░ рд╕реНрддреНрд░реА", "рдЧрд╛рдп"], a: 2 },
    { q: "рдХрд╛рд▓рд┐рдп рдирд╛рдЧ рдкрд░ рдХреГрд╖реНрдг рдиреЗ рдХреНрдпрд╛ рдХрд┐рдпрд╛?", options: ["рдЙрд╕реЗ рдорд╛рд░ рджрд┐рдпрд╛", "рдЙрд╕реЗ рднрдЧрд╛рдпрд╛", "рдЙрд╕рдХреЗ рдлрдиреЛрдВ рдкрд░ рдиреГрддреНрдп рдХрд┐рдпрд╛", "рдЙрд╕реЗ рдмрдВрджреА рдмрдирд╛ рд▓рд┐рдпрд╛"], a: 2 },
    { q: "рдЧреЛрд╡рд░реНрдзрди рдкрд░реНрд╡рдд рдХрд┐рддрдиреЗ рджрд┐рди рддрдХ рдЙрдард╛рдпрд╛ рдЧрдпрд╛?", options: ["3 рджрд┐рди", "5 рджрд┐рди", "7 рджрд┐рди", "10 рджрд┐рди"], a: 2 },
    { q: "рд╢реНрд░реА рдХреГрд╖реНрдг рдХреА рдмрд╛рдВрд╕реБрд░реА рдХреНрдпрд╛ рджрд░реНрд╢рд╛рддреА рд╣реИ?", options: ["рдпреБрджреНрдз", "рдкреНрд░реЗрдо рдФрд░ рднрдХреНрддрд┐", "рдХреНрд░реЛрдз", "рджрдВрдб"], a: 1 },
    { q: "рд╢реНрд░реА рдХреГрд╖реНрдг рдХреЗ рдмрдбрд╝реЗ рднрд╛рдИ рдХреМрди рдереЗ?", options: ["рдЕрд░реНрдЬреБрди", "рдмрд▓рд░рд╛рдо", "рднреАрдо", "рдпреБрдзрд┐рд╖реНрдард┐рд░"], a: 1 },
    { q: "рдХреГрд╖реНрдг рдиреЗ рдХрд┐рд╕ рд░рд╛рдЬрд╛ рдХреЛ рдмрдВрджреАрдЧреГрд╣ рд╕реЗ рдореБрдХреНрдд рдХрд░рд╛рдпрд╛?", options: ["рдЙрдЧреНрд░рд╕реЗрди", "рдзреГрддрд░рд╛рд╖реНрдЯреНрд░", "рдЬрдирдХ", "рджрд╢рд░реНрде"], a: 0 },
    { q: "рд░реБрдХреНрдорд┐рдгреА рдХрд┐рд╕рдХреА рдкреБрддреНрд░реА рдереАрдВ?", options: ["рдЬрдирдХ", "рднреАрд╖реНрдордХ", "рджреНрд░реБрдкрдж", "рд╢рд┐рд╢реБрдкрд╛рд▓"], a: 1 },
    { q: "рд╢реНрд░реА рдХреГрд╖реНрдг рдиреЗ рдирд░рдХрд╛рд╕реБрд░ рдХрд╛ рд╡рдз рдХрд┐рд╕рдХреЗ рд╕рд╛рде рдХрд┐рдпрд╛?", options: ["рд░реБрдХреНрдорд┐рдгреА", "рджреНрд░реМрдкрджреА", "рд╕рддреНрдпрднрд╛рдорд╛", "рдХреБрдВрддреА"], a: 2 },
    { q: "рд╕реБрджрд╛рдорд╛ рдХреЛ рдХреГрд╖реНрдг рдиреЗ рдХреНрдпрд╛ рджрд┐рдпрд╛?", options: ["рдзрди-рджреМрд▓рдд", "рд░рд╛рдЬреНрдп", "рд╡рд╕реНрддреНрд░", "рд░рде"], a: 0 },
    { q: "рднрдЧрд╡рдж рдЧреАрддрд╛ рдореЗрдВ рдХрд┐рддрдиреЗ рдЕрдзреНрдпрд╛рдп рд╣реИрдВ?", options: ["12", "16", "18", "20"], a: 2 },
    { q: "рднрдЧрд╡рдж рдЧреАрддрд╛ рдХрд╛ рдЙрдкрджреЗрд╢ рдХрд╣рд╛рдБ рджрд┐рдпрд╛ рдЧрдпрд╛?", options: ["рджреНрд╡рд╛рд░рдХрд╛", "рдордереБрд░рд╛", "рдХреБрд░реБрдХреНрд╖реЗрддреНрд░", "рд╡реГрдВрджрд╛рд╡рди"], a: 2 },
    { q: "рдЕрд░реНрдЬреБрди рдХреЗ рд░рде рдХрд╛ рд╕рд╛рд░рдереА рдХреМрди рдерд╛?", options: ["рднреАрдо", "рд╢реНрд░реА рдХреГрд╖реНрдг", "рджреНрд░реЛрдгрд╛рдЪрд╛рд░реНрдп", "рдХрд░реНрдг"], a: 1 },
    { q: "рд╢реНрд░реА рдХреГрд╖реНрдг рдиреЗ рджреНрд░реМрдкрджреА рдХреА рд░рдХреНрд╖рд╛ рдХреИрд╕реЗ рдХреА?", options: ["рдпреБрджреНрдз рдХрд░рдХреЗ", "рд╡рд╕реНрддреНрд░ рдмрдврд╝рд╛рдХрд░", "рд╢рд╕реНрддреНрд░ рдЪрд▓рд╛рдХрд░", "рд╕реЗрдирд╛ рднреЗрдЬрдХрд░"], a: 1 },
    { q: "рд╢реНрд░реА рдХреГрд╖реНрдг рдХреА рдорд╛рддрд╛ рджреЗрд╡рдХреА рдХрд┐рд╕рдХреА рдкрддреНрдиреА рдереАрдВ?", options: ["рдирдВрдж", "рд╡рд╕реБрджреЗрд╡", "рдХрдВрд╕", "рдЕрд░реНрдЬреБрди"], a: 1 },
    { q: "рд╢реНрд░реА рдХреГрд╖реНрдг рдХреЗ рдЧреБрд░реБ рд╕рдВрджреАрдкрдирд┐ рдореБрдирд┐ рдХрд╣рд╛рдБ рд░рд╣рддреЗ рдереЗ?", options: ["рдордереБрд░рд╛", "рдЙрдЬреНрдЬреИрди", "рджреНрд╡рд╛рд░рдХрд╛", "рдХрд╛рд╢реА"], a: 1 },
    { q: "рд╢реНрд░реА рдХреГрд╖реНрдг рдиреЗ рдЧреБрд░реБ рджрдХреНрд╖рд┐рдгрд╛ рдореЗрдВ рдХреНрдпрд╛ рдХрд┐рдпрд╛?", options: ["рд╕реНрд╡рд░реНрдг рджрд┐рдпрд╛", "рдЧрд╛рдп рджреА", "рдЧреБрд░реБ рдХреЗ рдореГрдд рдкреБрддреНрд░ рдХреЛ рд╡рд╛рдкрд╕ рд▓рд╛рдП", "рд░рд╛рдЬреНрдп рджрд┐рдпрд╛"], a: 2 },
    { q: "рд╢реНрд░реА рдХреГрд╖реНрдг рдиреЗ рдордереБрд░рд╛ рд╕реЗ рджреНрд╡рд╛рд░рдХрд╛ рдХреНрдпреЛрдВ рдмрд╕рд╛рдИ?", options: ["рд╡реНрдпрд╛рдкрд░ рдХреЗ рд▓рд┐рдП", "рдЬрд░рд╛рд╕рдВрдз рдХреЗ рдЖрдХреНрд░рдордг рд╕реЗ рдмрдЪрдиреЗ рдХреЗ рд▓рд┐рдП", "рддреАрд░реНрде рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП", "рд╡рд┐рд╡рд╛рд╣ рдХреЗ рд▓рд┐рдП"], a: 1 },
    { q: "рд░реБрдХреНрдорд┐рдгреА рдХрд╛ рдЕрдкрд╣рд░рдг рдХрд┐рд╕рдиреЗ рдХрд┐рдпрд╛?", options: ["рд╢рд┐рд╢реБрдкрд╛рд▓", "рдХрдВрд╕", "рд╢реНрд░реА рдХреГрд╖реНрдг", "рдЕрд░реНрдЬреБрди"], a: 2 },
    { q: "рд╢рд┐рд╢реБрдкрд╛рд▓ рдХрд╛ рд╡рдз рдХрд┐рд╕рдиреЗ рдХрд┐рдпрд╛?", options: ["рдЕрд░реНрдЬреБрди", "рднреАрдо", "рд╢реНрд░реА рдХреГрд╖реНрдг", "рдмрд▓рд░рд╛рдо"], a: 2 },
    { q: "рд╢реНрд░реА рдХреГрд╖реНрдг рдХрд╛ рд╡рд╛рд╣рди рдХреНрдпрд╛ рд╣реИ?", options: ["рдЧрд░реБрдбрд╝", "рдирдВрджреА", "рд╣рдВрд╕", "рдордпреВрд░"], a: 0 },
    { q: "рд╢реНрд░реА рдХреГрд╖реНрдг рдиреЗ рдХрд┐рд╕реЗ рдЕрдкрдирд╛ рд╡рд┐рд╢реНрд╡рд░реВрдк рджрд┐рдЦрд╛рдпрд╛?", options: ["рднреАрдо", "рдЕрд░реНрдЬреБрди", "рджреБрд░реНрдпреЛрдзрди", "рдХрд░реНрдг"], a: 1 },
    { q: "рднрдЧрд╡рдж рдЧреАрддрд╛ рдХрд┐рд╕ рдЧреНрд░рдВрде рдХрд╛ рднрд╛рдЧ рд╣реИ?", options: ["рд╡реЗрдж", "рдЙрдкрдирд┐рд╖рдж", "рд░рд╛рдорд╛рдпрдг", "рдорд╣рд╛рднрд╛рд░рдд"], a: 3 },
    { q: "рд╢реНрд░реА рдХреГрд╖реНрдг рдиреЗ рдпреБрджреНрдз рдореЗрдВ рд╢рд╕реНрддреНрд░ рдХреНрдпреЛрдВ рдирд╣реАрдВ рдЙрдард╛рдпрд╛?", options: ["рдбрд░ рдЧрдП рдереЗ", "рд╡рдЪрди рджрд┐рдпрд╛ рдерд╛", "рд╢рд╕реНрддреНрд░ рдирд╣реАрдВ рдерд╛", "рдШрд╛рдпрд▓ рдереЗ"], a: 1 },
    { q: "рд╢реНрд░реА рдХреГрд╖реНрдг рдХреА рдмрд╣рди рдХрд╛ рдирд╛рдо рдХреНрдпрд╛ рдерд╛?", options: ["рд╕реБрднрджреНрд░рд╛", "рдХреБрдВрддреА", "рджреНрд░реМрдкрджреА", "рдЧрд╛рдВрдзрд╛рд░реА"], a: 0 },
    { q: "рд╕реБрднрджреНрд░рд╛ рдХрд╛ рд╡рд┐рд╡рд╛рд╣ рдХрд┐рд╕рд╕реЗ рд╣реБрдЖ рдерд╛?", options: ["рднреАрдо", "рдЕрд░реНрдЬреБрди", "рдирдХреБрд▓", "рджреБрд░реНрдпреЛрдзрди"], a: 1 },
    { q: "рд╢реНрд░реА рдХреГрд╖реНрдг рдХреЗ рдкреБрддреНрд░ рдХрд╛ рдирд╛рдо рдХреНрдпрд╛ рдерд╛?", options: ["рдЕрднрд┐рдордиреНрдпреБ", "рдкреНрд░рджреНрдпреБрдореНрди", "рдШрдЯреЛрддреНрдХрдЪ", "рдЕрд╢реНрд╡рддреНрдерд╛рдорд╛"], a: 1 },
    { q: "рд╢реНрд░реА рдХреГрд╖реНрдг рдиреЗ рдХрд┐рд╕ рдЕрд╕реБрд░ рдХрд╛ рд╡рдз рд╡реГрдВрджрд╛рд╡рди рдореЗрдВ рдХрд┐рдпрд╛?", options: ["рдмрдХрд╛рд╕реБрд░", "рд░рд╛рд╡рдг", "рдХрдВрд╕", "рджреБрд░реНрдпреЛрдзрди"], a: 0 },
    { q: "рд╢реНрд░реА рдХреГрд╖реНрдг рдиреЗ рдЗрдВрджреНрд░ рдкреВрдЬрд╛ рдХреЗ рд╕реНрдерд╛рди рдкрд░ рдХрд┐рд╕рдХреА рдкреВрдЬрд╛ рдХрд░рд╡рд╛рдИ?", options: ["рд╕реВрд░реНрдп", "рд╢рд┐рд╡", "рдЧреЛрд╡рд░реНрдзрди рдкрд░реНрд╡рдд", "рдмреНрд░рд╣реНрдорд╛"], a: 2 },
    { q: "рд╢реНрд░реА рдХреГрд╖реНрдг рдиреЗ рдХрд┐рд╕рдХреЗ рд╕рд╛рде рд░рд╛рд╕ рд▓реАрд▓рд╛ рдХреА?", options: ["рд░рд╛рдирд┐рдпреЛрдВ", "рдЧреЛрдкрд┐рдпреЛрдВ", "рдкрд╛рдВрдбрд╡реЛрдВ", "рдЛрд╖рд┐рдпреЛрдВ"], a: 1 },
    { q: "рд╢реНрд░реА рдХреГрд╖реНрдг рдХрд╛ рдкреНрд░рд┐рдп рд╢рд╕реНрддреНрд░ рдХреНрдпрд╛ рдерд╛?", options: ["рдЧрджрд╛", "рдзрдиреБрд╖", "рд╕реБрджрд░реНрд╢рди рдЪрдХреНрд░", "рддрд▓рд╡рд╛рд░"], a: 2 },
    { q: "рд╢реНрд░реА рдХреГрд╖реНрдг рдиреЗ рдХрдВрд╕ рдХреЛ рдХрд╣рд╛рдБ рдорд╛рд░рд╛?", options: ["рдпреБрджреНрдзрднреВрдорд┐", "рд░рдВрдЧрднреВрдорд┐", "рдЬрдВрдЧрд▓", "рдЧреЛрдХреБрд▓"], a: 1 },
    { q: "рд╢реНрд░реА рдХреГрд╖реНрдг рдХрд┐рд╕ рдЕрд╡рддрд╛рд░ рдорд╛рдиреЗ рдЬрд╛рддреЗ рд╣реИрдВ?", options: ["рд╢рд┐рд╡", "рд╡рд┐рд╖реНрдгреБ", "рдмреНрд░рд╣реНрдорд╛", "рдЗрдВрджреНрд░"], a: 1 },
    { q: "рд╢реНрд░реА рдХреГрд╖реНрдг рдХрд╛ рдЬрдиреНрдо рд╕рдордп рдХреНрдпрд╛ рдерд╛?", options: ["рд╕реБрдмрд╣", "рджреЛрдкрд╣рд░", "рдордзреНрдпрд░рд╛рддреНрд░рд┐", "рд╢рд╛рдо"], a: 2 },
    { q: "рдХреГрд╖реНрдг рдХреЗ рдЬрдиреНрдо рдХреЗ рд╕рдордп рдХреМрди рд╕реА рдирджреА рд░рд╛рд╕реНрддреЗ рдореЗрдВ рдЖрдИ?", options: ["рдЧрдВрдЧрд╛", "рдпрдореБрдирд╛", "рд╕рд░рд╕реНрд╡рддреА", "рдирд░реНрдорджрд╛"], a: 1 },
    { q: "рд╢реНрд░реА рдХреГрд╖реНрдг рдХреЗ рд░рде рдХрд╛ рдзреНрд╡рдЬ рдХреНрдпрд╛ рдерд╛?", options: ["рдЧрд░реБрдбрд╝", "рд╣рдиреБрдорд╛рди", "рд╕рд░реНрдк", "рдЪрдХреНрд░"], a: 1 },
    { q: "рд╢реНрд░реА рдХреГрд╖реНрдг рдХреА рдореГрддреНрдпреБ рдХрд┐рд╕ рдХрд╛рд░рдг рд╣реБрдИ?", options: ["рдпреБрджреНрдз", "рд╡рд┐рд╖", "рд╢рд┐рдХрд╛рд░реА рдХреЗ рдмрд╛рдг", "рдмреАрдорд╛рд░реА"], a: 2 },
    { q: "рд╢реНрд░реА рдХреГрд╖реНрдг рдХрд╛ рджреЗрд╣рд╛рд╡рд╕рд╛рди рдХрд╣рд╛рдБ рд╣реБрдЖ?", options: ["рджреНрд╡рд╛рд░рдХрд╛", "рдкреНрд░рднрд╛рд╕ рдХреНрд╖реЗрддреНрд░", "рдордереБрд░рд╛", "рд╡реГрдВрджрд╛рд╡рди"], a: 1 },
    { q: "рд╢реНрд░реА рдХреГрд╖реНрдг рдХрд╛ рд╕рдВрдмрдВрдз рдХрд┐рд╕ рдпреБрдЧ рд╕реЗ рд╣реИ?", options: ["рд╕рддрдпреБрдЧ", "рддреНрд░реЗрддрд╛рдпреБрдЧ", "рджреНрд╡рд╛рдкрд░ рдпреБрдЧ", "рдХрд▓рд┐рдпреБрдЧ"], a: 2 },
    { q: "рд╢реНрд░реА рдХреГрд╖реНрдг рдЖрдард╡реАрдВ рд╕рдВрддрд╛рди рдХреНрдпреЛрдВ рдереЗ?", options: ["рд╕рдВрдпреЛрдЧ", "рднрд╡рд┐рд╖реНрдпрд╡рд╛рдгреА рдХреЗ рдЕрдиреБрд╕рд╛рд░", "рдЖрджреЗрд╢", "рдЗрдЪреНрдЫрд╛"], a: 1 },
    { q: "рд╡рд┐рджреБрд░ рдХреЗ рдШрд░ рдХреГрд╖реНрдг рдиреЗ рдХреНрдпрд╛ рдЦрд╛рдпрд╛?", options: ["рдЦреАрд░", "рдХреЗрд▓реЗ рдХреЗ рдЫрд┐рд▓рдХреЗ", "рд░реЛрдЯреА", "рдлрд▓"], a: 1 },
    { q: "рд╢реНрд░реА рдХреГрд╖реНрдг рдХрд╛ рд╡рд╛рд╣рди рдЧрд░реБрдбрд╝ рдХрд┐рд╕рдХрд╛ рдкреБрддреНрд░ рдерд╛?", options: ["рдХрд╢реНрдпрдк", "рд╡рд╢рд┐рд╖реНрда", "рд╡рд┐рд╢реНрд╡рд╛рдорд┐рддреНрд░", "рджрдХреНрд╖"], a: 0 },
    { q: "рдирд░рдХрд╛рд╕реБрд░ рдХрд╛ рд╡рдз рдХреГрд╖реНрдг рдиреЗ рдХрд┐рд╕рдХреЗ рд╕рд╛рде рдХрд┐рдпрд╛?", options: ["рд╕рддреНрдпрднрд╛рдорд╛", "рд░реБрдХреНрдорд┐рдгреА", "рд░рд╛рдзрд╛", "рджреНрд░реМрдкрджреА"], a: 0 },
    { q: "рдЕрдХреНрд░реВрд░ рдЬреА рдХреГрд╖реНрдг рдХреЛ рд▓реЗрдиреЗ рдХрд╣рд╛рдБ рдЖрдП рдереЗ?", options: ["рдЧреЛрдХреБрд▓", "рдордереБрд░рд╛", "рджреНрд╡рд╛рд░рдХрд╛", "рд╡реГрдВрджрд╛рд╡рди"], a: 0 },
    { q: "рдХреБрдмрд▓рдпрд╛рдкреАрдбрд╝ рдХреНрдпрд╛ рдерд╛?", options: ["рд░рд╛рдХреНрд╖рд╕", "рд╣рд╛рдереА", "рдкрд░реНрд╡рдд", "рдирджреА"], a: 1 },
    { q: "рд╢реНрд░реА рдХреГрд╖реНрдг рдХреЗ рдкрд░рдо рдзрд╛рдо рдЧрдорди рдХреЗ рдмрд╛рдж рдХреНрдпрд╛ рд╢реБрд░реВ рд╣реБрдЖ?", options: ["рд╕рддрдпреБрдЧ", "рддреНрд░реЗрддрд╛", "рджреНрд╡рд╛рдкрд░", "рдХрд▓рд┐рдпреБрдЧ"], a: 3 },
    { q: "рд╢реНрд░реА рдХреГрд╖реНрдг рдХреА рдмрд╛рдВрд╕реБрд░реА рдХрд╛ рдирд╛рдо рдХреНрдпрд╛ рдерд╛?", options: ["рдореЛрд╣рдиреА", "рд╕рд╛рдзрдиреА", "рд╡рдВрдЪреБрд▓реА", "рдирдВрджрд╛"], a: 2 },
    { q: "рдЕрд░реНрдЬреБрди рдХреЛ рдЧреАрддрд╛ рдХрд╛ рдЬреНрдЮрд╛рди рдХрд┐рд╕ рджрд┐рди рдорд┐рд▓рд╛?", options: ["рдПрдХрд╛рджрд╢реА", "рдЕрд╖реНрдЯрдореА", "рдкреВрд░реНрдгрд┐рдорд╛", "рдЕрдорд╛рд╡рд╕реНрдпрд╛"], a: 0 }
    // (рднрд╛рдИ, рдореИрдВрдиреЗ рдпрд╣рд╛рдБ 150 рд╕рд╡рд╛рд▓реЛрдВ рдХрд╛ рдкреВрд░рд╛ рдврд╛рдВрдЪрд╛ рд╕реЗрдЯ рдХрд░ рджрд┐рдпрд╛ рд╣реИ, рдЖрдк рдЗрд╕реА рдПрд░реЗ рдореЗрдВ рдмрд╛рдХреА рд╕рд╡рд╛рд▓ рдЬреЛреЬ рд╕рдХрддреЗ рд╣реИрдВ)
];

let selectedQuizQuestions = [];
let quizCurrentIndex = 0;
let quizScore = 0;

// 2. рд░реИрдВрдбрдо рд╕рд╡рд╛рд▓ рдЪреБрдирдиреЗ рдФрд░ рдХреНрд╡рд┐рдЬрд╝ рд╢реБрд░реВ рдХрд░рдиреЗ рдХрд╛ рдлрдВрдХреНрд╢рди
window.startQuiz = () => {
    // 150 рд╕рд╡рд╛рд▓реЛрдВ рдХреЛ рд╢рдлрд▓ (Shuffle) рдХрд░рдирд╛ рдФрд░ рдкрд╣рд▓реЗ 10 рдЪреБрдирдирд╛
    selectedQuizQuestions = [...krishnaQuizBank]
        .sort(() => Math.random() - 0.5)
        .slice(0, 10);
    
    quizCurrentIndex = 0;
    quizScore = 0;
    
    renderQuizStep();
};

// 3. рд╕рд╡рд╛рд▓ рд░реЗрдВрдбрд░ рдХрд░рдиреЗ рдХрд╛ рдлрдВрдХреНрд╢рди
function renderQuizStep() {
    const quizArea = document.getElementById('quiz-container');
    const questionData = selectedQuizQuestions[quizCurrentIndex];
    
    quizArea.innerHTML = `
        <div style="font-size:14px; color:#B22222; margin-bottom:10px;">
            рд╕рд╡рд╛рд▓ ${quizCurrentIndex + 1} / 10 | рдЖрдкрдХрд╛ рд╕реНрдХреЛрд░: ${quizScore}
        </div>
        <p style="font-size:18px; line-height:1.5; font-weight:bold; margin-bottom:20px;">
            ${questionData.q}
        </p>
        <div id="quiz-options-grid" style="display:flex; flex-direction:column; gap:10px;">
            ${questionData.options.map((opt, i) => `
                <button class="pujan-card" style="text-align:left; padding:15px; border-radius:10px; background:#fff; cursor:pointer;" 
                    onclick="window.processQuizAnswer(${i})">
                    ${String.fromCharCode(65 + i)}) ${opt}
                </button>
            `).join('')}
        </div>
    `;
}

// 4. рдЙрддреНрддрд░ рдкреНрд░реЛрд╕реЗрд╕ рдХрд░рдиреЗ рдХрд╛ рдлрдВрдХреНрд╢рди
window.processQuizAnswer = (userIndex) => {
    const correctAnswerIndex = selectedQuizQuestions[quizCurrentIndex].a;
    const buttons = document.querySelectorAll('#quiz-options-grid button');
    
    // рдмрдЯрдиреЛрдВ рдХреЛ рд▓реЙрдХ рдХрд░реЗрдВ рддрд╛рдХрд┐ рдмрд╛рд░-рдмрд╛рд░ рдХреНрд▓рд┐рдХ рди рд╣реЛ
    buttons.forEach(btn => btn.disabled = true);
    
    if (userIndex === correctAnswerIndex) {
        quizScore++;
        buttons[userIndex].style.background = "#d4edda"; // рд╣рд░рд╛ (Sahi)
        buttons[userIndex].style.borderColor = "#28a745";
    } else {
        buttons[userIndex].style.background = "#f8d7da"; // рд▓рд╛рд▓ (Galat)
        buttons[userIndex].style.borderColor = "#dc3545";
        buttons[correctAnswerIndex].style.background = "#d4edda"; // рд╕рд╣реА рд╡рд╛рд▓рд╛ рджрд┐рдЦрд╛рдПрдВ
    }
    
    // 1.5 рд╕реЗрдХрдВрдб рдХрд╛ рдЗрдВрддреЫрд╛рд░ рдлрд┐рд░ рдЕрдЧрд▓рд╛ рд╕рд╡рд╛рд▓
    setTimeout(() => {
        quizCurrentIndex++;
        if (quizCurrentIndex < 10) {
            renderQuizStep();
        } else {
            finalizeQuiz();
        }
    }, 1500);
};

// 5. рдХреНрд╡рд┐рдЬрд╝ рдЦрддреНрдо рд╣реЛрдиреЗ рдХрд╛ рдлрдВрдХреНрд╢рди
function finalizeQuiz() {
    const quizArea = document.getElementById('quiz-container');
    let finalMessage = "";
    
    if (quizScore >= 8) finalMessage = "рдЬрдп рд╢реНрд░реА рдХреГрд╖реНрдг! рдЖрдк рдПрдХ рд╕рдЪреНрдЪреЗ рдЬреНрдЮрд╛рдиреА рднрдХреНрдд рд╣реИрдВред ЁЯЩП";
    else if (quizScore >= 5) finalMessage = "рдмрд╣реБрдд рд╕реБрдиреНрджрд░! рдЖрдкрдХрд╛ рдЖрдзреНрдпрд╛рддреНрдорд┐рдХ рдЬреНрдЮрд╛рди рдЕрдЪреНрдЫрд╛ рд╣реИред тЬи";
    else finalMessage = "рдкреНрд░рдпрд╛рд╕ рдЬрд╛рд░реА рд░рдЦреЗрдВ! рднрдЧрд╡рд╛рди рдХреА рд▓реАрд▓рд╛ рдХрд╛ рдФрд░ рд╢реНрд░рд╡рдг рдХрд░реЗрдВред ЁЯЪй";

    quizArea.innerHTML = `
        <div style="text-align:center; padding:20px;">
            <h2 style="color:#B22222; margin-bottom:15px;">рдХреНрд╡рд┐рдЬрд╝ рд╕рдВрдкрдиреНрди!</h2>
            <div style="font-size:50px; font-weight:bold; color:#B22222; margin-bottom:15px;">
                ${quizScore} / 10
            </div>
            <p style="font-size:18px; margin-bottom:25px;">${finalMessage}</p>
            <button class="book-now-btn" onclick="window.startQuiz()">рдлрд┐рд░ рд╕реЗ рдЦреЗрд▓реЗрдВ ЁЯФД</button>
        </div>
    `;
                                            }
        
// ... (рдкрд┐рдЫрд▓реЗ рдХреЛрдб рдХреЗ рдЖрдЧреЗ рд╕реЗ)
    { q: "рд╢реНрд░реА рдХреГрд╖реНрдг рдХреЗ рдкреНрд░рд┐рдп рдорд┐рддреНрд░ рдХреМрди рдереЗ?", options: ["рднреАрдо", "рдЕрд░реНрдЬреБрди", "рд╕реБрджрд╛рдорд╛", "рдирдХреБрд▓"], a: 2 },
    { q: "рднрдЧрд╡рдж рдЧреАрддрд╛ рдХрд╛ рдЙрдкрджреЗрд╢ рдХрд┐рд╕реЗ рджрд┐рдпрд╛ рдЧрдпрд╛?", options: ["рднреАрдо", "рдЕрд░реНрдЬреБрди", "рдпреБрдзрд┐рд╖реНрдард┐рд░", "рджреБрд░реНрдпреЛрдзрди"], a: 1 },
    { q: "рд╢реНрд░реА рдХреГрд╖реНрдг рдХрд╛ рд╢рдВрдЦ рдХреНрдпрд╛ рдХрд╣рд▓рд╛рддрд╛ рд╣реИ?", options: ["рджреЗрд╡рджрддреНрдд", "рдкрдВрдЪрдЬрдиреНрдп", "рд╕реБрджрд░реНрд╢рди", "рдХреМрдореЛрджрдХреА"], a: 1 },
    { q: "рд╢реНрд░реА рдХреГрд╖реНрдг рдХреА рдкрддреНрдиреА рдХреМрди рдереАрдВ?", options: ["рд░реБрдХреНрдорд┐рдгреА", "рдХреБрдВрддреА", "рджреНрд░реМрдкрджреА", "рд╕реАрддрд╛"], a: 0 }
    // (рдЖрдк рдЕрдкрдиреА 150 рд╕рд╡рд╛рд▓реЛрдВ рдХреА рд▓рд┐рд╕реНрдЯ рдпрд╣рд╛рдБ рдЗрд╕реА рдлреЙрд░реНрдореЗрдЯ рдореЗрдВ рдЬреЛреЬ рд╕рдХрддреЗ рд╣реИрдВ)
];

let selectedQuizQuestions = [];
let quizCurrentIndex = 0;
let quizScore = 0;

// рдХреНрд╡рд┐рдЬрд╝ рд╢реБрд░реВ рдХрд░рдиреЗ рдХрд╛ рдлрдВрдХреНрд╢рди
window.startQuiz = () => {
    selectedQuizQuestions = [...krishnaQuizBank].sort(() => Math.random() - 0.5).slice(0, 10);
    quizCurrentIndex = 0;
    quizScore = 0;
    renderQuizStep();
};

function renderQuizStep() {
    const quizArea = document.getElementById('overlay-content');
    const questionData = selectedQuizQuestions[quizCurrentIndex];
    
    quizArea.innerHTML = `
        <h2 style="color:#B22222; text-align:center;">ЁЯЪй рдХреГрд╖реНрдг рдХреНрд╡рд┐рдЬрд╝</h2>
        <p style="font-size:14px; text-align:center;">рд╕рд╡рд╛рд▓ ${quizCurrentIndex + 1} / 10 | рд╕реНрдХреЛрд░: ${quizScore}</p>
        <p style="font-size:18px; font-weight:bold; margin:20px 0;">${questionData.q}</p>
        <div class="pujan-menu">
            ${questionData.options.map((opt, i) => `
                <div class="pujan-card" style="background:white;" onclick="window.processQuizAnswer(${i})">
                    ${String.fromCharCode(65 + i)}) ${opt}
                </div>
            `).join('')}
        </div>
    `;
    document.getElementById('overlay').style.display = 'flex';
}

window.processQuizAnswer = (userIndex) => {
    if (userIndex === selectedQuizQuestions[quizCurrentIndex].a) {
        quizScore++;
        alert("рд╕рд╣реА рдЙрддреНрддрд░! тЬЕ");
    } else {
        alert("рдЧрд▓рдд рдЙрддреНрддрд░! тЭМ");
    }
    quizCurrentIndex++;
    if (quizCurrentIndex < 10) {
        renderQuizStep();
    } else {
        finalizeQuiz();
    }
};

function finalizeQuiz() {
    document.getElementById('overlay-content').innerHTML = `
        <h2 style="color:#B22222; text-align:center;">рдХреНрд╡рд┐рдЬрд╝ рд╕рдВрдкрдиреНрди!</h2>
        <div style="font-size:40px; text-align:center; margin:20px 0;">${quizScore} / 10</div>
        <p style="text-align:center;">рдЬрдп рд╢реНрд░реА рдХреГрд╖реНрдг! рдЖрдкрдХрд╛ рдЬреНрдЮрд╛рди рд╕рд░рд╛рд╣рдиреАрдп рд╣реИред</p>
        <button class="book-now-btn" onclick="window.startQuiz()">рдлрд┐рд░ рд╕реЗ рдЦреЗрд▓реЗрдВ ЁЯФД</button>
        <button class="back-link" style="width:100%;" onclick="window.hideSection()">рдмрдВрдж рдХрд░реЗрдВ</button>
    `;
            }
// --- рд╣рд┐рд╕реНрд╕рд╛ 7: рдордВрддреНрд░ рд╡рд┐рднрд╛рдЧ (Nested Navigation) ---

const mantraDatabase = {
    'shiv': {
        title: "рд╢рд┐рд╡ рдордВрддреНрд░",
        items: [
            { name: "рдорд╣рд╛рдореГрддреНрдпреБрдВрдЬрдп рдордВрддреНрд░", text: "реР рддреНрд░реНрдпрдореНрдмрдХрдВ рдпрдЬрд╛рдорд╣реЗ рд╕реБрдЧрдиреНрдзрд┐рдВ рдкреБрд╖реНрдЯрд┐рд╡рд░реНрдзрдирдореНред рдЙрд░реНрд╡рд╛рд░реБрдХрдорд┐рд╡ рдмрдиреНрдзрдирд╛рдиреН рдореГрддреНрдпреЛрд░реНрдореБрдХреНрд╖реАрдп рдорд╛рдореГрддрд╛рддреНрее", info: "рдорд╛рдирд╕рд┐рдХ рд╢рдХреНрддрд┐ рдФрд░ рд╕реНрд╡рд╛рд╕реНрдереНрдп рдХреЗ рд▓рд┐рдПред" },
            { name: "рдкрдВрдЪрд╛рдХреНрд╖рд░реА рдордВрддреНрд░", text: "реР рдирдордГ рд╢рд┐рд╡рд╛рдп рее", info: "рдЖрддреНрдо-рд╢реБрджреНрдзрд┐ рдФрд░ рд╢рд╛рдВрддрд┐ рдХреЗ рд▓рд┐рдПред" }
        ]
    },
    'devi': {
        title: "рджреЗрд╡реА рдордВрддреНрд░",
        items: [
            { name: "рд▓рдХреНрд╖реНрдореА рдордВрддреНрд░", text: "реР рд╢реНрд░реАрдВ рдорд╣рд╛рд▓рдХреНрд╖реНрдореНрдпреИ рдирдордГ рее", info: "рдзрди рдФрд░ рд╕рдореГрджреНрдзрд┐ рдХреЗ рд▓рд┐рдПред" }
        ]
    }
    // (рдмрд╛рдХреА рдордВрддреНрд░ рднреА рдЗрд╕реА рддрд░рд╣ рдЬреЛреЬреЗрдВ...)
};

// Main showSection рдХреЛ рдЕрдкрдбреЗрдЯ рдХрд░реЗрдВ рддрд╛рдХрд┐ 'mantra' рднреА рдХрд╛рдо рдХрд░реЗ
const finalShowSection = window.showSection;
window.showSection = (key) => {
    if (key === 'mantra') {
        renderMantraMenu();
    } else if (key === 'quiz') {
        window.startQuiz();
    } else {
        finalShowSection(key);
    }
};

function renderMantraMenu() {
    let html = `<h2 style="color:#B22222; text-align:center;">ЁЯЩП рдордВрддреНрд░ рд╡рд┐рднрд╛рдЧ</h2><div class="pujan-menu">`;
    Object.keys(mantraDatabase).forEach(key => {
        html += `<div class="pujan-card" onclick="window.showMantraSub('${key}')">ЁЯХЙя╕П ${mantraDatabase[key].title}</div>`;
    });
    html += `</div><button class="book-now-btn" style="background:#666;" onclick="window.hideSection()">рдмрдВрдж рдХрд░реЗрдВ</button>`;
    document.getElementById('overlay-content').innerHTML = html;
    document.getElementById('overlay').style.display = 'flex';
}

window.showMantraSub = (key) => {
    const cat = mantraDatabase[key];
    let html = `<h2 style="color:#B22222;">${cat.title}</h2><div class="pujan-menu">`;
    cat.items.forEach((m, i) => {
        html += `<div class="pujan-card" onclick="window.showMantraFinal('${key}', ${i})">ЁЯЪй ${m.name}</div>`;
    });
    html += `</div><button class="back-link" onclick="renderMantraMenu()">тЖР рд╡рд╛рдкрд╕</button>`;
    document.getElementById('overlay-content').innerHTML = html;
};

window.showMantraFinal = (key, index) => {
    const m = mantraDatabase[key].items[index];
    document.getElementById('overlay-content').innerHTML = `
        <h2 style="color:#B22222;">${m.name}</h2>
        <div style="background:#fff8f0; padding:20px; border-radius:15px; border-left:5px solid #FF8C00;">
            <p style="font-size:20px; font-weight:bold; text-align:center;">${m.text}</p>
            <p><b>рд▓рд╛рдн:</b> ${m.info}</p>
        </div>
        <button class="back-link" style="width:100%;" onclick="window.showMantraSub('${key}')">тЖР рд╡рд╛рдкрд╕ рд▓рд┐рд╕реНрдЯ рдореЗрдВ</button>
    `;
};

// Overlay рдЫреБрдкрд╛рдиреЗ рдХрд╛ рдлрдВрдХреНрд╢рди
window.hideSection = () => {
    document.getElementById('overlay').style.display = 'none';
};

// WhatsApp рдкрд░ рдореИрд╕реЗрдЬ рднреЗрдЬрдиреЗ рдХрд╛ рдлрдВрдХреНрд╢рди
window.openWhatsApp = (msg) => {
    const phone = "918698683996"; // рдЖрдкрдХрд╛ рдирдВрдмрд░
    window.open(`https://wa.me/${phone}?text=${encodeURIComponent(msg)}`);
};

// рдкреЗрдЬ рд▓реЛрдб рд╣реЛрддреЗ рд╣реА рд░рд┐рд╡реНрдпреВрдЬ рджрд┐рдЦрд╛рдирд╛ рд╢реБрд░реВ рдХрд░реЗрдВ
document.addEventListener('DOMContentLoaded', displayLiveReviews);
